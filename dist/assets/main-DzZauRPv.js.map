{"version":3,"mappings":"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","names":["routes","path","component","__vitePreload","import","__VITE_PRELOAD__","children","name","then","n","d","meta","title","preload","e","f","h","router","createRouter","history","createWebHistory","scrollBehavior","to","from","savedPosition","top","preloadRoutes","forEach","route","_a","push","childRoute","Promise","all","map","componentLoader","catch","err","beforeEach","async","next","document","loadingEvent","CustomEvent","detail","loading","window","dispatchEvent","afterEach","class","props","__props","tourStore","useTourStore","skipAnimations","computed","spotlightStyle","bounds","left","width","height","transition","value","zIndex","$props","_createElementBlock","style","$setup","_createElementVNode","_openBlock","_hoisted_1","tooltipRef","ref","tourService","inject","store","resizeObserver","contentObserver","position","dragPosition","isDragging","hasMoved","useDraggable","handle","initialPosition","x","y","onDragEnd","newPosition","setManualTooltipPosition","watch","tooltipStyle","dimensions","tooltipDimensions","minWidth","tooltipConstraints","maxWidth","_b","minHeight","_c","maxHeight","_d","setupResizeObserver","ResizeObserver","entries","entry","contentRect","clearTimeout","setTimeout","manualTooltipPosition","updateTooltipPosition","observe","cleanupObservers","disconnect","onMounted","setupTooltipResizeObserver","onUnmounted","cleanupTooltipObservers","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_18","fill","viewBox","_createBlock","_Teleport","floatingMode","_toDisplayString","step","totalSteps","_normalizeStyle","currentStep","innerHTML","content","dataHighlight","_hoisted_8","label","insights","length","_hoisted_13","_cache","_Fragment","_renderList","insight","key","canGoPrevious","disabled","isLoading","onClick","_ctx","$emit","_hoisted_17","_hoisted_19","_hoisted_21","isLastStep","_hoisted_23","_hoisted_22","controlsRef","controlsPosition","innerWidth","controlsStyle","display","gap","handleClose","stopTour","nextStep","previousStep","isPaused","resumeTour","pauseTour","event","target","currentTarget","overlayVisible","handleBackdropClick","spotlightBounds","highlightedElement","handlePause","tooltipVisible","tooltipPosition","currentStepIndex","canGoNext","onNext","handleNext","onPrevious","handlePrevious","onSkip","handleSkip","onClose","onPause","id","dataStore","useDataStore","uiStore","useUIStore","initializeUI","addLoadingMessage","initializeApp","error","clearLoadingMessages","onBeforeUnmount","savePreferences","handleKeydown","ctrlKey","metaKey","preventDefault","toggleDarkMode","toggleSidebar","addEventListener","removeEventListener","loadingMessages","message","_createVNode","_component_router_view","DEFAULT_SPACING","VIEWPORT_PADDING","MIN_TOOLTIP_SIZE","MAX_TOOLTIP_SIZE","positionCache","Map","checkBoundaryOverlap","rect1","rect2","padding","r1","bottom","right","r2","isFullyVisible","rect","viewport","findNonOverlappingPosition","elementBounds","tooltipSize","preferredPosition","positions","spacing","priority","largerSpacing","sort","a","b","generatePossiblePositions","preferred","find","p","unshift","tooltipBounds","hasOverlap","isVisible","isOptimal","floatingPosition","elementCenter","bestQuadrant","space","reduce","best","current","isFloating","calculateFloatingPosition","floatingBounds","cleanupCache","now","Date","timestamp","delete","size","oldestKey","keys","calculateOptimalPosition","contentSize","options","constraints","adaptive","useCache","cacheKey","roundBounds","Math","round","roundViewport","JSON","stringify","generateCacheKey","has","cached","get","result","fromCache","availableSpace","minSize","min","maxSize","max","maxAvailableWidth","maxAvailableHeight","originalRatio","newRatio","abs","calculateAdaptiveSize","optimalPosition","smallerSize","retryPosition","metadata","wasResized","originalSize","set","cacheManager","clearCache","clear","getStats","Array","slice","forceCleanup","TourService$1","constructor","this","observers","animationFrame","isInitialized","highlightTracker","positionUpdateCallback","lastCalculatedPosition","tooltipResizeObserver","performanceMetrics","positionCalculations","cacheHits","averageCalculationTime","lastCalculationTime","updateQueue","Set","rafUpdateId","init","app","config","globalProperties","$router","useHighlightTracker","callback","throttleMs","lastCall","rafId","pendingArgs","executeCallback","performance","args","cancelAnimationFrame","requestAnimationFrame","createPositionUpdateCallback","element","handleElementBoundsUpdate","setupEventListeners","isActive","debounce","startTour","tourId","availableTours","t","nextTick","executeStep","reason","clearHighlights","cancelPendingAnimations","cancelPendingUpdates","logPerformanceMetrics","success","goToStep","stepIndex","currentRoute","navigateToRoute","waitForElement","actions","onEnter","resolve","updatedElement","scrollToElement","highlightElement","highlightOptions","selector","behavior","querySelector","getBoundingClientRect","innerHeight","scrollIntoView","block","inline","timeout","observer","MutationObserver","timeoutId","body","childList","subtree","startTracking","setHighlightedElement","throttle","classList","add","originalZIndex","setAttribute","stopAllTracking","querySelectorAll","el","remove","getAttribute","removeProperty","removeAttribute","startTime","setTooltipPosition","getTooltipContentSize","calculationTime","updatePerformanceMetrics","setTooltipDimensions","setFloatingMode","setPositioningMetadata","registerTour","tour","registerTours","tours","func","wait","resetManualTooltipPosition","boundsChangedSignificantly","currentTooltipBounds","getCurrentTooltipBounds","checkCurrentOverlap","newBounds","oldBounds","tooltipEl","currentRect","originalStyle","visibility","measuredRect","Object","assign","tooltipElement","forcePositionRecalculation","wasManual","getPositioningDebugInfo","cacheStats","positioningMetadata","totalCalculations","currentAverage","queueUpdate","updateFn","queuePositionUpdate","clearPositioningCache","setPerformanceOptimizations","enabled","setUserPreference","setProductSelection","product","selectedProduct","setYearSelection","year","selectedYear","setCountrySelection","country","selectedCountry","setMetricSelection","metric","selectedMetric","setUISelections","selections","TourPlugin","install","TourService","provide","$tour","initializeTourSystem","TourOverlay","autoStart","localStorage","getItem","description","estimatedDuration","category","difficulty","steps","selectedYearRange","start","end","setSelectedYear","pinia","createPinia","createApp","App","errorHandler","instance","info","warnHandler","msg","trace","use","mount"],"ignoreList":[],"sources":["../../src/router/index.js","../../src/tour/components/TourSpotlight.vue","../../src/tour/components/TourTooltip.vue","../../src/tour/components/TourOverlay.vue","../../src/App.vue","../../src/tour/utils/tooltipPositioning.js","../../src/tour/services/TourService.js","../../src/tour/index.js","../../src/tour/config/tourSteps.js","../../src/main.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\n\nconst routes = [\n  {\n    path: '/',\n    component: () => import('@/components/layout/AppLayout.vue'),\n    children: [\n      {\n        path: '',\n        name: 'home',\n        component: () => import('@/components/panels/DashboardPanel.vue'),\n        meta: {\n          title: 'D2 Nutrition Vibes - Home',\n          preload: true\n        }\n      },\n      {\n        path: '/dashboard',\n        name: 'dashboard',\n        component: () => import('@/components/panels/DashboardPanel.vue'),\n        meta: {\n          title: 'Dashboard - D2 Nutrition Vibes',\n          preload: true\n        }\n      },\n      {\n        path: '/timeseries',\n        name: 'timeseries',\n        component: () => import('@/components/panels/TimeseriesPanel.vue'),\n        meta: {\n          title: 'Zeitreihen - D2 Nutrition Vibes'\n        }\n      },\n      {\n        path: '/simulation',\n        name: 'simulation',\n        component: () => import('@/components/panels/SimulationPanel.vue'),\n        meta: {\n          title: 'Simulation - D2 Nutrition Vibes'\n        }\n      },\n      {\n        path: '/ml-predictions',\n        name: 'ml-predictions',\n        component: () => import('@/components/panels/MLPanel.vue'),\n        meta: {\n          title: 'ML Prognosen - D2 Nutrition Vibes'\n        }\n      }\n    ]\n  },\n  {\n    path: '/:pathMatch(.*)*',\n    name: 'not-found',\n    component: () => import(/* webpackChunkName: \"not-found\" */ '@/components/layout/NotFound.vue'),\n    meta: {\n      title: 'Seite nicht gefunden - D2 Nutrition Vibes'\n    }\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes,\n  scrollBehavior(to, from, savedPosition) {\n    if (savedPosition) {\n      return savedPosition\n    } else {\n      return { top: 0 }\n    }\n  }\n})\n\n// Preloader for critical routes\nconst preloadRoutes = []\nroutes.forEach(route => {\n  if (route.component && route.meta?.preload) {\n    preloadRoutes.push(route.component)\n  }\n  if (route.children) {\n    route.children.forEach(childRoute => {\n      if (childRoute.meta?.preload && route.component) {\n        preloadRoutes.push(route.component)\n      }\n    })\n  }\n})\n\nPromise.all(preloadRoutes.map(componentLoader => componentLoader()))\n  .catch(err => console.warn('Failed to preload some routes:', err))\n\n// Navigation guards\nrouter.beforeEach(async (to, from, next) => {\n  // Set page title\n  if (to.meta.title) {\n    document.title = to.meta.title\n  }\n  \n  // Show loading indicator for route transitions\n  if (from.name && to.name && from.name !== to.name) {\n    const loadingEvent = new CustomEvent('route-loading', { detail: { loading: true } })\n    window.dispatchEvent(loadingEvent)\n  }\n  \n  next()\n})\n\nrouter.afterEach(() => {\n  // Hide loading indicator after route transition\n  const loadingEvent = new CustomEvent('route-loading', { detail: { loading: false } })\n  window.dispatchEvent(loadingEvent)\n})\n\nexport default router","<template>\n  <div \n    v-if=\"bounds\"\n    class=\"tour-spotlight\"\n    :style=\"spotlightStyle\"\n  >\n    <!-- Spotlight effect with clean borders -->\n    <div class=\"tour-spotlight-glow\"></div>\n    \n    <!-- Highlight ring for the element -->\n    <div \n      v-if=\"!skipAnimations\"\n      class=\"tour-highlight-ring\"\n    ></div>\n  </div>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\nimport { useTourStore } from '../stores/useTourStore'\n\nconst props = defineProps({\n  bounds: {\n    type: Object,\n    required: true\n  },\n  target: {\n    type: String,\n    default: ''\n  }\n})\n\nconst tourStore = useTourStore()\n\nconst skipAnimations = computed(() => tourStore.skipAnimations)\n\nconst spotlightStyle = computed(() => {\n  if (!props.bounds) return {}\n  \n  return {\n    top: `${props.bounds.top}px`,\n    left: `${props.bounds.left}px`,\n    width: `${props.bounds.width}px`,\n    height: `${props.bounds.height}px`,\n    transition: skipAnimations.value ? 'none' : 'all 0.3s ease',\n    zIndex: 9998\n  }\n})\n</script>\n\n<style scoped>\n/* All styles are now in tour.css for consistency */\n</style>","<template>\n  <Teleport to=\"body\">\n    <div \n      ref=\"tooltipRef\"\n      class=\"tour-tooltip\"\n      :class=\"{\n        'floating-mode': store.floatingMode,\n        'compact': store.tooltipDimensions.width < 350\n      }\"\n      :style=\"tooltipStyle\"\n    >\n      <!-- Drag handle -->\n      <div class=\"tour-tooltip-handle\">\n        <div class=\"flex items-center justify-between\">\n          <div class=\"flex items-center space-x-2\">\n            <svg class=\"w-4 h-4 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path d=\"M7 2a2 2 0 00-2 2v1a2 2 0 002 2h6a2 2 0 002-2V4a2 2 0 00-2-2H7zM5 9a2 2 0 012-2h6a2 2 0 012 2v1a2 2 0 01-2 2H7a2 2 0 01-2-2V9zM7 13a2 2 0 00-2 2v1a2 2 0 002 2h6a2 2 0 002-2v-1a2 2 0 00-2-2H7z\"/>\n            </svg>\n            <span class=\"text-xs text-gray-500 dark:text-gray-400\">Ziehen zum Verschieben</span>\n          </div>\n        </div>\n      </div>\n    \n      <!-- Step header -->\n      <div class=\"mb-4 mt-2\">\n        <div class=\"flex items-center justify-between mb-2\">\n          <h3 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n            {{ step.title }}\n          </h3>\n          <span class=\"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded\">\n            {{ currentStep }} / {{ totalSteps }}\n          </span>\n        </div>\n      \n        <!-- Tour progress indicator -->\n        <div class=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mb-2\">\n          <div \n            class=\"bg-primary-500 h-1.5 rounded-full transition-all duration-300\"\n            :style=\"{ width: `${(currentStep / totalSteps) * 100}%` }\"\n          ></div>\n        </div>\n      </div>\n    \n      <!-- Step content -->\n      <div class=\"mb-6\">\n        <p class=\"text-gray-700 dark:text-gray-300 leading-relaxed\" v-html=\"step.content\"></p>\n      \n        <!-- Data highlight box -->\n        <div \n          v-if=\"step.dataHighlight\" \n          class=\"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\"\n        >\n          <div class=\"flex items-start space-x-2\">\n            <svg class=\"w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"/>\n            </svg>\n            <div class=\"flex-1\">\n              <p class=\"text-sm font-medium text-blue-900 dark:text-blue-100\">\n                {{ step.dataHighlight.label }}\n              </p>\n              <p class=\"text-sm text-blue-700 dark:text-blue-300 mt-1\">\n                {{ step.dataHighlight.value }}\n              </p>\n            </div>\n          </div>\n        </div>\n      \n        <!-- Additional insights -->\n        <div \n          v-if=\"step.insights && step.insights.length\" \n          class=\"mt-4 space-y-2\"\n        >\n          <h4 class=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\n            💡 Wussten Sie schon?\n          </h4>\n          <ul class=\"text-sm text-gray-600 dark:text-gray-400 space-y-1\">\n            <li v-for=\"insight in step.insights\" :key=\"insight\" class=\"flex items-start space-x-2\">\n              <span class=\"text-primary-500 mt-1\">•</span>\n              <span>{{ insight }}</span>\n            </li>\n          </ul>\n        </div>\n      </div>\n    \n      <!-- Navigation controls -->\n      <div class=\"flex justify-between items-center\">\n        <!-- Previous button -->\n        <button \n          v-if=\"canGoPrevious\"\n          :disabled=\"isLoading\"\n          class=\"btn btn-secondary flex items-center space-x-2 disabled:opacity-50\"\n          @click=\"$emit('previous')\"\n        >\n          <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path fill-rule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\" clip-rule=\"evenodd\"/>\n          </svg>\n          <span>Zurück</span>\n        </button>\n        <div v-else></div>\n      \n        <!-- Action buttons -->\n        <div class=\"flex space-x-2\">\n          <!-- Skip tour button -->\n          <button \n            class=\"btn btn-ghost text-sm\"\n            :disabled=\"isLoading\"\n            @click=\"$emit('skip')\"\n          >\n            Tour überspringen\n          </button>\n        \n          <!-- Next/Finish button -->\n          <button \n            :disabled=\"isLoading\"\n            class=\"btn btn-primary flex items-center space-x-2 disabled:opacity-50\"\n            @click=\"$emit('next')\"\n          >\n            <span v-if=\"isLoading\" class=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></span>\n            <span>{{ isLastStep ? 'Tour beenden' : 'Weiter' }}</span>\n            <svg v-if=\"!isLastStep && !isLoading\" class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clip-rule=\"evenodd\"/>\n            </svg>\n            <svg v-else-if=\"isLastStep && !isLoading\" class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n    \n      <!-- Keyboard shortcuts hint -->\n      <div class=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\n        <p class=\"text-xs text-gray-500 dark:text-gray-400 text-center\">\n          <kbd class=\"kbd-hint\">←</kbd> Zurück • \n          <kbd class=\"kbd-hint\">→</kbd> Weiter • \n          <kbd class=\"kbd-hint\">Esc</kbd> Beenden\n        </p>\n      </div>\n    </div>\n  </Teleport>\n</template>\n\n<script setup>\nimport { computed, ref, inject, watch, onMounted, onUnmounted } from 'vue'\nimport { useDraggable } from '../composables/useDraggable'\nimport { useTourStore } from '../stores/useTourStore'\n\nconst props = defineProps({\n  step: {\n    type: Object,\n    required: true\n  },\n  position: {\n    type: Object,\n    required: true\n  },\n  currentStep: {\n    type: Number,\n    required: true\n  },\n  totalSteps: {\n    type: Number,\n    required: true\n  },\n  canGoPrevious: {\n    type: Boolean,\n    default: false\n  },\n  canGoNext: {\n    type: Boolean,\n    default: true\n  },\n  isLastStep: {\n    type: Boolean,\n    default: false\n  },\n  isLoading: {\n    type: Boolean,\n    default: false\n  }\n})\n\ndefineEmits(['next', 'previous', 'skip', 'close', 'pause'])\n\nconst tooltipRef = ref(null)\nconst tourService = inject('tourService')\nconst store = useTourStore()\n\n// ResizeObserver für Content-Size-Tracking\nlet resizeObserver = null\nlet contentObserver = null\n\n// Initialize draggable functionality\nconst { position: dragPosition, isDragging, hasMoved } = useDraggable(tooltipRef, {\n  handle: '.tour-tooltip-handle',\n  bounds: 'viewport',\n  initialPosition: { x: props.position.left, y: props.position.top },\n  onDragEnd: (newPosition) => {\n    // Store the user's manual position\n    if (tourService) {\n      tourService.setManualTooltipPosition(newPosition)\n    }\n  }\n})\n\n// Watch for position changes from props (when auto-positioned)\nwatch(() => props.position, (newPosition) => {\n  if (!hasMoved.value) {\n    dragPosition.value = { x: newPosition.left, y: newPosition.top }\n  }\n})\n\nconst tooltipStyle = computed(() => {\n  const dimensions = store.tooltipDimensions\n  \n  return {\n    position: 'fixed',\n    top: `${dragPosition.value.y}px`,\n    left: `${dragPosition.value.x}px`,\n    width: typeof dimensions.width === 'number' ? `${dimensions.width}px` : dimensions.width,\n    height: typeof dimensions.height === 'number' ? `${dimensions.height}px` : dimensions.height,\n    minWidth: `${store.tooltipConstraints?.minWidth || 300}px`,\n    maxWidth: `${store.tooltipConstraints?.maxWidth || 600}px`,\n    minHeight: `${store.tooltipConstraints?.minHeight || 200}px`,\n    maxHeight: store.tooltipConstraints?.maxHeight ? `${store.tooltipConstraints.maxHeight}px` : '80vh',\n    zIndex: '9999 !important',\n    transition: isDragging.value ? 'none' : 'all 0.3s ease'\n  }\n})\n\n// Setup ResizeObserver für automatische Größenerkennung\nconst setupResizeObserver = () => {\n  if (!window.ResizeObserver || !tooltipRef.value) return\n  \n  // Observer für den Tooltip-Container\n  resizeObserver = new ResizeObserver((entries) => {\n    for (const entry of entries) {\n      const { width, height } = entry.contentRect\n      \n      // Nur aktualisieren wenn sich die Größe tatsächlich geändert hat\n      if (width !== store.tooltipDimensions.width || \n          height !== store.tooltipDimensions.height) {\n        \n        // Debounce rapid changes\n        clearTimeout(contentObserver)\n        contentObserver = setTimeout(() => {\n          if (!hasMoved.value && tourService && !tourService.manualTooltipPosition) {\n            // Nur neu positionieren wenn nicht manuell bewegt\n            tourService.updateTooltipPosition()\n          }\n        }, 100)\n      }\n    }\n  })\n  \n  resizeObserver.observe(tooltipRef.value)\n}\n\nconst cleanupObservers = () => {\n  if (resizeObserver) {\n    resizeObserver.disconnect()\n    resizeObserver = null\n  }\n  if (contentObserver) {\n    clearTimeout(contentObserver)\n    contentObserver = null\n  }\n}\n\n// Lifecycle hooks\nonMounted(() => {\n  // Setup ResizeObserver nach dem Mount\n  setTimeout(() => {\n    setupResizeObserver()\n    // Informiere TourService über das Tooltip-Element\n    if (tourService && tooltipRef.value) {\n      tourService.setupTooltipResizeObserver(tooltipRef.value)\n    }\n  }, 50)\n})\n\nonUnmounted(() => {\n  cleanupObservers()\n  if (tourService) {\n    tourService.cleanupTooltipObservers()\n  }\n})\n</script>\n\n<style scoped>\n/* Tooltip animation */\n@keyframes tourTooltipAppear {\n  from {\n    opacity: 0;\n    transform: translateY(10px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n/* Button styles */\n.btn {\n  @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;\n}\n\n.btn-primary {\n  @apply bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500;\n}\n\n.btn-secondary {\n  @apply bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200 focus:ring-gray-500;\n}\n\n.btn-ghost {\n  @apply text-gray-600 hover:text-gray-800 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700 focus:ring-gray-500;\n}\n\n.btn:disabled {\n  @apply cursor-not-allowed;\n}\n\n/* Keyboard hint styling */\n.kbd-hint {\n  @apply inline-block bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300 px-1 py-0.5 rounded text-xs font-mono;\n}\n\n/* Tour tooltip specific overrides */\n.tour-tooltip {\n  @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700;\n  /* Dynamische Größen werden über inline-styles gesetzt */\n  overflow: hidden;\n  box-shadow: \n    0 20px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04),\n    0 0 0 1px rgba(0, 0, 0, 0.05);\n  display: flex;\n  flex-direction: column;\n  z-index: 9999 !important; /* Ensure tooltip is always on top */\n  position: relative;\n  \n  /* Smooth transitions für Größenänderungen */\n  transition: width 0.3s ease, height 0.3s ease;\n}\n\n/* Drag handle styling */\n.tour-tooltip-handle {\n  @apply px-6 py-3 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700;\n  cursor: grab;\n  user-select: none;\n  flex-shrink: 0;\n}\n\n.tour-tooltip-handle:active {\n  cursor: grabbing;\n}\n\n/* Content area with padding and scroll */\n.tour-tooltip > *:not(.tour-tooltip-handle) {\n  @apply px-6;\n}\n\n.tour-tooltip > div:last-child {\n  @apply pb-6;\n}\n\n/* Scrollable content area */\n.tour-tooltip {\n  display: flex;\n  flex-direction: column;\n}\n\n.tour-tooltip > div:nth-child(2),\n.tour-tooltip > div:nth-child(3) {\n  overflow-y: auto;\n  flex: 1;\n}\n\n/* Dark mode shadow adjustment */\n.dark .tour-tooltip {\n  box-shadow: \n    0 20px 25px -5px rgba(0, 0, 0, 0.3),\n    0 10px 10px -5px rgba(0, 0, 0, 0.2),\n    0 0 0 1px rgba(255, 255, 255, 0.1);\n}\n\n/* Responsive adjustments */\n@media (max-width: 640px) {\n  .tour-tooltip {\n    /* Mobile: Engere Constraints */\n    min-width: 280px !important;\n    max-width: calc(100vw - 2rem) !important;\n    max-height: calc(100vh - 4rem) !important;\n  }\n  \n  /* Kleinere Schriftgrößen auf Mobile */\n  .tour-tooltip .text-lg {\n    font-size: 1rem;\n    line-height: 1.5rem;\n  }\n  \n  .tour-tooltip .text-base {\n    font-size: 0.875rem;\n    line-height: 1.25rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .tour-tooltip {\n    /* Sehr kleine Screens: Minimale Größe */\n    min-width: 260px !important;\n    font-size: 14px;\n  }\n  \n  .tour-tooltip-handle {\n    padding: 0.5rem 1rem;\n  }\n  \n  .tour-tooltip > div:not(.tour-tooltip-handle) {\n    padding-left: 1rem;\n    padding-right: 1rem;\n  }\n}\n\n/* Floating mode indicator */\n.tour-tooltip.floating-mode {\n  border: 2px dashed rgba(59, 130, 246, 0.5);\n  background: rgba(255, 255, 255, 0.95);\n}\n\n.dark .tour-tooltip.floating-mode {\n  background: rgba(31, 41, 55, 0.95);\n}\n\n/* Adaptive content sizing */\n.tour-tooltip.compact {\n  font-size: 13px;\n}\n\n.tour-tooltip.compact .text-lg {\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n\n.tour-tooltip.compact .text-base {\n  font-size: 0.75rem;\n  line-height: 1rem;\n}\n\n.tour-tooltip.compact .btn {\n  font-size: 0.75rem;\n  padding: 0.25rem 0.75rem;\n}\n</style>","<template>\n  <Teleport to=\"body\">\n    <div \n      v-if=\"tourStore.overlayVisible\" \n      class=\"tour-overlay\"\n    >\n      <!-- Semi-transparent backdrop -->\n      <div \n        class=\"tour-backdrop\"\n        @click=\"handleBackdropClick\"\n      >\n      </div>\n      \n      <!-- Spotlight cutout for highlighted element -->\n      <TourSpotlight \n        v-if=\"tourStore.spotlightBounds\"\n        :bounds=\"tourStore.spotlightBounds\"\n        :target=\"tourStore.highlightedElement\"\n      />\n      \n      \n      \n      <!-- Tour controls (minimize/maximize) -->\n      <div ref=\"controlsRef\" class=\"tour-controls-container\" :style=\"controlsStyle\">\n        <button\n          class=\"tour-control-btn bg-gray-800 hover:bg-gray-700 text-white p-2 rounded-lg shadow-lg transition-colors\"\n          title=\"Tour pausieren\"\n          @click=\"handlePause\"\n        >\n          <svg v-if=\"!tourStore.isPaused\" class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path d=\"M5.5 3.5A1.5 1.5 0 017 2h6a1.5 1.5 0 011.5 1.5v13a1.5 1.5 0 01-1.5 1.5H7A1.5 1.5 0 015.5 16.5v-13zM7 4v12h2V4H7zm4 0v12h2V4h-2z\"/>\n          </svg>\n          <svg v-else class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path d=\"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z\"/>\n          </svg>\n        </button>\n        \n        <button\n          class=\"tour-control-btn bg-red-600 hover:bg-red-500 text-white p-2 rounded-lg shadow-lg transition-colors\"\n          title=\"Tour beenden\"\n          @click=\"handleClose\"\n        >\n          <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"/>\n          </svg>\n        </button>\n      </div>\n    </div>\n  </Teleport>\n  \n  <!-- Tour tooltip - separate teleport to be above everything -->\n  <TourTooltip\n    v-if=\"tourStore.tooltipVisible && tourStore.currentStep\"\n    :step=\"tourStore.currentStep\"\n    :position=\"tourStore.tooltipPosition\"\n    :current-step=\"tourStore.currentStepIndex + 1\"\n    :total-steps=\"tourStore.totalSteps\"\n    :can-go-previous=\"tourStore.canGoPrevious\"\n    :can-go-next=\"tourStore.canGoNext\"\n    :is-last-step=\"tourStore.isLastStep\"\n    :is-loading=\"tourStore.isLoading\"\n    @next=\"handleNext\"\n    @previous=\"handlePrevious\"\n    @skip=\"handleSkip\"\n    @close=\"handleClose\"\n    @pause=\"handlePause\"\n  />\n</template>\n\n<script setup>\nimport { inject, ref, computed } from 'vue'\nimport { useTourStore } from '../stores/useTourStore'\nimport { useDraggable } from '../composables/useDraggable'\nimport TourSpotlight from './TourSpotlight.vue'\nimport TourTooltip from './TourTooltip.vue'\n\nconst tourStore = useTourStore()\nconst tourService = inject('tourService')\nconst controlsRef = ref(null)\n\n// Initialize draggable controls\nconst { position: controlsPosition } = useDraggable(controlsRef, {\n  bounds: 'viewport',\n  initialPosition: { x: window.innerWidth - 200, y: 20 }\n})\n\nconst controlsStyle = computed(() => ({\n  position: 'fixed',\n  top: `${controlsPosition.value.y}px`,\n  left: `${controlsPosition.value.x}px`,\n  zIndex: 9996,\n  display: 'flex',\n  gap: '0.5rem'\n}))\n\nconst handleNext = () => {\n  tourService.nextStep()\n}\n\nconst handlePrevious = () => {\n  tourService.previousStep()\n}\n\nconst handleSkip = () => {\n  tourService.stopTour('skipped')\n}\n\nconst handleClose = () => {\n  tourService.stopTour('user_closed')\n}\n\nconst handlePause = () => {\n  if (tourStore.isPaused) {\n    tourService.resumeTour()\n  } else {\n    tourService.pauseTour()\n  }\n}\n\n\nconst handleBackdropClick = (event) => {\n  // Only close on backdrop click if click is actually on backdrop\n  if (event.target === event.currentTarget) {\n    handleClose()\n  }\n}\n</script>\n\n<style scoped>\n/* Tour components use styles from tour.css */\n.tour-controls-container {\n  @apply bg-gray-900 bg-opacity-90 rounded-lg p-2 shadow-lg;\n  cursor: move;\n}\n\n.tour-control-btn {\n  transition: all 0.2s ease;\n}\n\n.tour-control-btn:hover {\n  transform: scale(1.05);\n}\n\n@keyframes tourFadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n</style>","<template>\n  <div id=\"app\" class=\"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300\">\n    <!-- Global Loading Overlay -->\n    <div \n      v-if=\"uiStore.isLoading\" \n      class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\n    >\n      <div class=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm mx-4\">\n        <div class=\"flex items-center space-x-3\">\n          <div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-500\"></div>\n          <div>\n            <p class=\"text-gray-900 dark:text-gray-100 font-medium\">Lädt...</p>\n            <p class=\"text-gray-600 dark:text-gray-400 text-sm mt-1\">\n              {{ uiStore.loadingMessages[0]?.message || 'Daten werden geladen...' }}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n\n    <!-- Main App Content -->\n    <router-view />\n    \n    <!-- Tour Overlay -->\n    <TourOverlay />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, onBeforeUnmount } from 'vue'\nimport { useDataStore } from '@/stores/useDataStore'\nimport { useUIStore } from '@/stores/useUIStore'\nimport TourOverlay from '@/tour/components/TourOverlay.vue'\n\n// Stores\nconst dataStore = useDataStore()\nconst uiStore = useUIStore()\n\n// Initialize app\nonMounted(async () => {\n  console.log('D2 Nutrition Vibes Vue.js App initialized')\n  \n  // Initialize UI settings\n  uiStore.initializeUI()\n  \n  // Initialize critical data\n  try {\n    uiStore.addLoadingMessage('Initialisiere Anwendung...')\n    await dataStore.initializeApp()\n    \n  } catch (error) {\n    console.error('App initialization failed:', error)\n    console.error('Einige Daten konnten nicht geladen werden.')\n  } finally {\n    uiStore.clearLoadingMessages()\n  }\n})\n\n// Save preferences before unmount\nonBeforeUnmount(() => {\n  uiStore.savePreferences()\n})\n\n// Handle keyboard shortcuts\nconst handleKeydown = (event) => {\n  // Toggle dark mode with Ctrl/Cmd + D\n  if ((event.ctrlKey || event.metaKey) && event.key === 'd') {\n    event.preventDefault()\n    uiStore.toggleDarkMode()\n    \n  }\n  \n  // Toggle sidebar with Ctrl/Cmd + S\n  if ((event.ctrlKey || event.metaKey) && event.key === 's') {\n    event.preventDefault()\n    uiStore.toggleSidebar()\n    \n  }\n}\n\nonMounted(() => {\n  document.addEventListener('keydown', handleKeydown)\n})\n\nonBeforeUnmount(() => {\n  document.removeEventListener('keydown', handleKeydown)\n})\n</script>\n\n<style>\n/* Global app styles */\n#app {\n  font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n/* Custom scrollbar */\n::-webkit-scrollbar {\n  width: 8px;\n}\n\n::-webkit-scrollbar-track {\n  @apply bg-gray-100 dark:bg-gray-800;\n}\n\n::-webkit-scrollbar-thumb {\n  @apply bg-gray-300 dark:bg-gray-600 rounded-full;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  @apply bg-gray-400 dark:bg-gray-500;\n}\n\n/* Selection color */\n::selection {\n  @apply bg-primary-500 text-white;\n}\n\n/* Focus outline */\n.focus-outline {\n  @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;\n}\n</style>","/**\n * Intelligente Tooltip-Positionierung mit Kollisionsvermeidung\n * Implementiert dynamische Positionierung die garantiert keine Überlappung\n * mit dem zu highlightenden Element erzeugt.\n */\n\n// Konstanten für Positionierung\nconst DEFAULT_SPACING = 20\nconst VIEWPORT_PADDING = 20\nconst MIN_TOOLTIP_SIZE = { width: 300, height: 200 }\nconst MAX_TOOLTIP_SIZE = { width: 600, height: 500 }\n\n// Performance-Optimierungen: Memoization Cache\nconst positionCache = new Map()\nconst CACHE_MAX_SIZE = 100\nconst CACHE_TTL = 5000 // 5 Sekunden\n\n/**\n * Prüft ob sich zwei Rechtecke überlappen\n * @param {Object} rect1 - Erstes Rechteck {top, left, width, height, bottom, right}\n * @param {Object} rect2 - Zweites Rechteck {top, left, width, height, bottom, right}\n * @param {number} padding - Sicherheitsabstand\n * @returns {boolean} True wenn Überlappung vorhanden\n */\nexport function checkBoundaryOverlap(rect1, rect2, padding = 0) {\n  const r1 = {\n    top: rect1.top - padding,\n    left: rect1.left - padding,\n    bottom: (rect1.bottom || rect1.top + rect1.height) + padding,\n    right: (rect1.right || rect1.left + rect1.width) + padding\n  }\n  \n  const r2 = {\n    top: rect2.top,\n    left: rect2.left,\n    bottom: rect2.bottom || rect2.top + rect2.height,\n    right: rect2.right || rect2.left + rect2.width\n  }\n\n  return !(r1.right < r2.left || \n           r1.left > r2.right || \n           r1.bottom < r2.top || \n           r1.top > r2.bottom)\n}\n\n/**\n * Prüft ob ein Rechteck vollständig im Viewport sichtbar ist\n * @param {Object} rect - Rechteck zum Prüfen\n * @param {Object} viewport - Viewport {width, height}\n * @param {number} padding - Mindestabstand zum Rand\n * @returns {boolean} True wenn vollständig sichtbar\n */\nexport function isFullyVisible(rect, viewport, padding = VIEWPORT_PADDING) {\n  return rect.left >= padding &&\n         rect.top >= padding &&\n         rect.left + rect.width <= viewport.width - padding &&\n         rect.top + rect.height <= viewport.height - padding\n}\n\n/**\n * Berechnet optimale Tooltip-Größe basierend auf Inhalt und verfügbarem Platz\n * @param {Object} contentSize - Natürliche Inhaltsgröße\n * @param {Object} availableSpace - Verfügbarer Platz im Viewport\n * @param {Object} constraints - Min/Max Größenbeschränkungen\n * @returns {Object} Optimale Größe {width, height}\n */\nexport function calculateAdaptiveSize(contentSize, availableSpace, constraints = {}) {\n  const minSize = { ...MIN_TOOLTIP_SIZE, ...constraints.min }\n  const maxSize = { ...MAX_TOOLTIP_SIZE, ...constraints.max }\n  \n  // Bevorzuge natürliche Größe, aber respektiere Limits\n  let width = Math.max(minSize.width, Math.min(contentSize.width || 400, maxSize.width))\n  let height = Math.max(minSize.height, Math.min(contentSize.height || 300, maxSize.height))\n  \n  // Anpassung an verfügbaren Platz\n  const maxAvailableWidth = availableSpace.width - (VIEWPORT_PADDING * 2)\n  const maxAvailableHeight = availableSpace.height - (VIEWPORT_PADDING * 2)\n  \n  if (width > maxAvailableWidth) {\n    width = Math.max(minSize.width, maxAvailableWidth)\n  }\n  \n  if (height > maxAvailableHeight) {\n    height = Math.max(minSize.height, maxAvailableHeight)\n  }\n  \n  // Aspect Ratio Anpassung bei extremen Größenänderungen\n  const originalRatio = (contentSize.width || 400) / (contentSize.height || 300)\n  const newRatio = width / height\n  \n  // Wenn Ratio zu stark abweicht, bevorzuge Höhe\n  if (Math.abs(originalRatio - newRatio) > 0.5 && height < maxAvailableHeight * 0.8) {\n    height = Math.min(width / originalRatio, maxAvailableHeight)\n  }\n  \n  return { width: Math.round(width), height: Math.round(height) }\n}\n\n/**\n * Generiert alle möglichen Positionen für das Tooltip\n * @param {Object} elementBounds - Grenzen des zu highlightenden Elements  \n * @param {Object} tooltipSize - Größe des Tooltips\n * @param {number} spacing - Abstand zwischen Element und Tooltip\n * @returns {Array} Array von Position-Objekten mit Priorität\n */\nexport function generatePossiblePositions(elementBounds, tooltipSize, spacing = DEFAULT_SPACING) {\n  const positions = []\n  \n  // Primäre Positionen (direkt an Element)\n  // Bottom (bevorzugt)\n  positions.push({\n    position: 'bottom',\n    priority: 1,\n    top: elementBounds.bottom + spacing,\n    left: elementBounds.left + (elementBounds.width / 2) - (tooltipSize.width / 2)\n  })\n  \n  // Top\n  positions.push({\n    position: 'top',\n    priority: 2,\n    top: elementBounds.top - tooltipSize.height - spacing,\n    left: elementBounds.left + (elementBounds.width / 2) - (tooltipSize.width / 2)\n  })\n  \n  // Right\n  positions.push({\n    position: 'right',\n    priority: 3,\n    top: elementBounds.top + (elementBounds.height / 2) - (tooltipSize.height / 2),\n    left: elementBounds.right + spacing\n  })\n  \n  // Left\n  positions.push({\n    position: 'left',\n    priority: 4,\n    top: elementBounds.top + (elementBounds.height / 2) - (tooltipSize.height / 2),\n    left: elementBounds.left - tooltipSize.width - spacing\n  })\n  \n  // Eck-Positionen\n  // Bottom-Right\n  positions.push({\n    position: 'bottom-right',\n    priority: 5,\n    top: elementBounds.bottom + spacing,\n    left: elementBounds.right - (tooltipSize.width / 2)\n  })\n  \n  // Bottom-Left\n  positions.push({\n    position: 'bottom-left',\n    priority: 6,\n    top: elementBounds.bottom + spacing,\n    left: elementBounds.left - (tooltipSize.width / 2)\n  })\n  \n  // Top-Right\n  positions.push({\n    position: 'top-right',\n    priority: 7,\n    top: elementBounds.top - tooltipSize.height - spacing,\n    left: elementBounds.right - (tooltipSize.width / 2)\n  })\n  \n  // Top-Left\n  positions.push({\n    position: 'top-left',\n    priority: 8,\n    top: elementBounds.top - tooltipSize.height - spacing,\n    left: elementBounds.left - (tooltipSize.width / 2)\n  })\n  \n  // Sekundäre Positionen mit größerem Abstand\n  const largerSpacing = spacing * 2\n  \n  positions.push({\n    position: 'bottom-far',\n    priority: 9,\n    top: elementBounds.bottom + largerSpacing,\n    left: elementBounds.left + (elementBounds.width / 2) - (tooltipSize.width / 2)\n  })\n  \n  positions.push({\n    position: 'top-far',\n    priority: 10,\n    top: elementBounds.top - tooltipSize.height - largerSpacing,\n    left: elementBounds.left + (elementBounds.width / 2) - (tooltipSize.width / 2)\n  })\n  \n  return positions.sort((a, b) => a.priority - b.priority)\n}\n\n/**\n * Berechnet Floating-Position wenn keine andere Position funktioniert\n * @param {Object} elementBounds - Grenzen des Elements\n * @param {Object} tooltipSize - Größe des Tooltips  \n * @param {Object} viewport - Viewport-Informationen\n * @returns {Object} Floating-Position\n */\nexport function calculateFloatingPosition(elementBounds, tooltipSize, viewport) {\n  // Finde den Quadranten mit dem meisten freien Platz\n  const elementCenter = {\n    x: elementBounds.left + elementBounds.width / 2,\n    y: elementBounds.top + elementBounds.height / 2\n  }\n  \n  const quadrants = [\n    // Top-Left\n    {\n      x: VIEWPORT_PADDING,\n      y: VIEWPORT_PADDING,\n      space: elementCenter.x * elementCenter.y,\n      position: 'floating-top-left'\n    },\n    // Top-Right  \n    {\n      x: viewport.width - tooltipSize.width - VIEWPORT_PADDING,\n      y: VIEWPORT_PADDING,\n      space: (viewport.width - elementCenter.x) * elementCenter.y,\n      position: 'floating-top-right'\n    },\n    // Bottom-Left\n    {\n      x: VIEWPORT_PADDING,\n      y: viewport.height - tooltipSize.height - VIEWPORT_PADDING,\n      space: elementCenter.x * (viewport.height - elementCenter.y),\n      position: 'floating-bottom-left'\n    },\n    // Bottom-Right\n    {\n      x: viewport.width - tooltipSize.width - VIEWPORT_PADDING,\n      y: viewport.height - tooltipSize.height - VIEWPORT_PADDING,\n      space: (viewport.width - elementCenter.x) * (viewport.height - elementCenter.y),\n      position: 'floating-bottom-right'\n    }\n  ]\n  \n  // Wähle Quadrant mit dem meisten Platz\n  const bestQuadrant = quadrants.reduce((best, current) => \n    current.space > best.space ? current : best\n  )\n  \n  return {\n    position: bestQuadrant.position,\n    priority: 99,\n    top: bestQuadrant.y,\n    left: bestQuadrant.x,\n    isFloating: true\n  }\n}\n\n/**\n * Findet die beste Position ohne Überlappung mit dem Element\n * @param {Object} elementBounds - Grenzen des zu highlightenden Elements\n * @param {Object} tooltipSize - Gewünschte Tooltip-Größe\n * @param {Object} viewport - Viewport-Informationen {width, height}\n * @param {string} preferredPosition - Bevorzugte Position ('auto', 'top', 'bottom', etc.)\n * @returns {Object} Beste Position mit Metadaten\n */\nexport function findNonOverlappingPosition(elementBounds, tooltipSize, viewport, preferredPosition = 'auto') {\n  const positions = generatePossiblePositions(elementBounds, tooltipSize)\n  \n  // Wenn bevorzugte Position angegeben, diese zuerst prüfen\n  if (preferredPosition !== 'auto') {\n    const preferred = positions.find(p => p.position === preferredPosition)\n    if (preferred) {\n      positions.unshift(preferred)\n    }\n  }\n  \n  // Prüfe jede Position auf Überlappung und Sichtbarkeit\n  for (const position of positions) {\n    const tooltipBounds = {\n      top: position.top,\n      left: position.left,\n      width: tooltipSize.width,\n      height: tooltipSize.height,\n      bottom: position.top + tooltipSize.height,\n      right: position.left + tooltipSize.width\n    }\n    \n    // Prüfe Überlappung mit Element (mit Sicherheitsabstand)\n    const hasOverlap = checkBoundaryOverlap(elementBounds, tooltipBounds, 10)\n    \n    // Prüfe Sichtbarkeit im Viewport\n    const isVisible = isFullyVisible(tooltipBounds, viewport)\n    \n    if (!hasOverlap && isVisible) {\n      return {\n        ...position,\n        bounds: tooltipBounds,\n        hasOverlap: false,\n        isVisible: true,\n        isOptimal: true\n      }\n    }\n  }\n  \n  // Fallback: Floating-Position\n  const floatingPosition = calculateFloatingPosition(elementBounds, tooltipSize, viewport)\n  const floatingBounds = {\n    top: floatingPosition.top,\n    left: floatingPosition.left,\n    width: tooltipSize.width,\n    height: tooltipSize.height,\n    bottom: floatingPosition.top + tooltipSize.height,\n    right: floatingPosition.left + tooltipSize.width\n  }\n  \n  return {\n    ...floatingPosition,\n    bounds: floatingBounds,\n    hasOverlap: checkBoundaryOverlap(elementBounds, floatingBounds, 10),\n    isVisible: isFullyVisible(floatingBounds, viewport),\n    isOptimal: false\n  }\n}\n\n/**\n * Generiert Cache-Key für Positionierungsberechnungen\n * @param {Object} elementBounds - Element-Grenzen\n * @param {Object} contentSize - Content-Größe\n * @param {Object} viewport - Viewport-Informationen\n * @param {Object} options - Optionen\n * @returns {string} Cache-Key\n */\nfunction generateCacheKey(elementBounds, contentSize, viewport, options) {\n  // Runde Werte für bessere Cache-Hits\n  const roundBounds = {\n    top: Math.round(elementBounds.top / 5) * 5,\n    left: Math.round(elementBounds.left / 5) * 5,\n    width: Math.round(elementBounds.width / 5) * 5,\n    height: Math.round(elementBounds.height / 5) * 5\n  }\n  \n  const roundViewport = {\n    width: Math.round(viewport.width / 10) * 10,\n    height: Math.round(viewport.height / 10) * 10\n  }\n  \n  return JSON.stringify({\n    elementBounds: roundBounds,\n    contentSize,\n    viewport: roundViewport,\n    preferredPosition: options.preferredPosition || 'auto'\n  })\n}\n\n/**\n * Bereinigt abgelaufene Cache-Einträge\n */\nfunction cleanupCache() {\n  const now = Date.now()\n  for (const [key, value] of positionCache.entries()) {\n    if (now - value.timestamp > CACHE_TTL) {\n      positionCache.delete(key)\n    }\n  }\n  \n  // Begrenze Cache-Größe\n  if (positionCache.size > CACHE_MAX_SIZE) {\n    const oldestKey = positionCache.keys().next().value\n    positionCache.delete(oldestKey)\n  }\n}\n\n/**\n * Hauptfunktion für intelligente Tooltip-Positionierung\n * @param {Object} elementBounds - Grenzen des zu highlightenden Elements\n * @param {Object} contentSize - Natürliche Größe des Tooltip-Inhalts\n * @param {Object} viewport - Viewport-Informationen\n * @param {Object} options - Zusätzliche Optionen\n * @returns {Object} Optimale Position und Größe\n */\nexport function calculateOptimalPosition(elementBounds, contentSize, viewport, options = {}) {\n  const {\n    preferredPosition = 'auto',\n    constraints = {},\n    spacing = DEFAULT_SPACING,\n    adaptive = true,\n    useCache = true\n  } = options\n  \n  // Performance: Cache-Lookup\n  const cacheKey = useCache ? generateCacheKey(elementBounds, contentSize, viewport, options) : null\n  if (useCache && positionCache.has(cacheKey)) {\n    const cached = positionCache.get(cacheKey)\n    if (Date.now() - cached.timestamp < CACHE_TTL) {\n      return { ...cached.result, fromCache: true }\n    }\n    positionCache.delete(cacheKey)\n  }\n  \n  // 1. Berechne optimale Tooltip-Größe\n  const tooltipSize = adaptive \n    ? calculateAdaptiveSize(contentSize, viewport, constraints)\n    : { ...contentSize }\n  \n  // 2. Finde beste Position ohne Überlappung\n  const optimalPosition = findNonOverlappingPosition(\n    elementBounds, \n    tooltipSize, \n    viewport, \n    preferredPosition\n  )\n  \n  // 3. Falls immer noch Überlappung, versuche kleinere Größe\n  if (optimalPosition.hasOverlap && adaptive && tooltipSize.width > MIN_TOOLTIP_SIZE.width) {\n    const smallerSize = {\n      width: Math.max(MIN_TOOLTIP_SIZE.width, tooltipSize.width * 0.8),\n      height: Math.max(MIN_TOOLTIP_SIZE.height, tooltipSize.height * 0.8)\n    }\n    \n    const retryPosition = findNonOverlappingPosition(\n      elementBounds,\n      smallerSize,\n      viewport,\n      preferredPosition\n    )\n    \n    if (!retryPosition.hasOverlap) {\n      const result = {\n        position: { top: retryPosition.top, left: retryPosition.left },\n        size: smallerSize,\n        metadata: {\n          ...retryPosition,\n          wasResized: true,\n          originalSize: tooltipSize\n        }\n      }\n      \n      // Cache das Ergebnis\n      if (useCache && cacheKey) {\n        cleanupCache()\n        positionCache.set(cacheKey, { result, timestamp: Date.now() })\n      }\n      \n      return result\n    }\n  }\n  \n  const result = {\n    position: { top: optimalPosition.top, left: optimalPosition.left },\n    size: tooltipSize,\n    metadata: {\n      ...optimalPosition,\n      wasResized: false\n    }\n  }\n  \n  // Cache das Ergebnis\n  if (useCache && cacheKey) {\n    cleanupCache()\n    positionCache.set(cacheKey, { result, timestamp: Date.now() })\n  }\n  \n  return result\n}\n\n/**\n * Hilfsfunktion für Echtzeit-Updates mit RAF-Optimierung\n * @param {Function} callback - Callback für Position-Updates\n * @param {number} throttleMs - Throttle-Intervall in Millisekunden\n * @returns {Function} Optimierter Callback\n */\nexport function createPositionUpdateCallback(callback, throttleMs = 16) {\n  let lastCall = 0\n  let rafId = null\n  let pendingArgs = null\n  \n  const executeCallback = () => {\n    if (pendingArgs) {\n      callback(...pendingArgs)\n      pendingArgs = null\n      lastCall = performance.now()\n    }\n    rafId = null\n  }\n  \n  return (...args) => {\n    const now = performance.now()\n    pendingArgs = args\n    \n    // Sofortige Ausführung wenn genug Zeit vergangen\n    if (now - lastCall >= throttleMs) {\n      if (rafId) {\n        cancelAnimationFrame(rafId)\n      }\n      rafId = requestAnimationFrame(executeCallback)\n    } else if (!rafId) {\n      // Verzögerte Ausführung\n      const delay = throttleMs - (now - lastCall)\n      setTimeout(() => {\n        if (pendingArgs) {\n          rafId = requestAnimationFrame(executeCallback)\n        }\n      }, delay)\n    }\n  }\n}\n\n/**\n * Optimierte Batch-Positionierung für mehrere Elemente\n * @param {Array} elements - Array von Element-Bounds\n * @param {Object} sharedOptions - Geteilte Optionen\n * @returns {Array} Array von Positionierungsergebnissen\n */\nexport function batchCalculatePositions(elements, sharedOptions = {}) {\n  const results = []\n  const { viewport, constraints } = sharedOptions\n  \n  // Sortiere Elemente nach Priorität (z.B. Größe)\n  const sortedElements = elements.sort((a, b) => \n    (b.elementBounds.width * b.elementBounds.height) - \n    (a.elementBounds.width * a.elementBounds.height)\n  )\n  \n  // Berechne Positionen in einem Batch\n  for (const element of sortedElements) {\n    const result = calculateOptimalPosition(\n      element.elementBounds,\n      element.contentSize,\n      viewport,\n      { ...sharedOptions, ...element.options }\n    )\n    \n    results.push({\n      ...element,\n      positioning: result\n    })\n  }\n  \n  return results\n}\n\n/**\n * Cache-Management-Funktionen\n */\nexport const cacheManager = {\n  /**\n   * Leert den gesamten Cache\n   */\n  clearCache() {\n    positionCache.clear()\n  },\n  \n  /**\n   * Cache-Statistiken\n   * @returns {Object} Cache-Info\n   */\n  getStats() {\n    return {\n      size: positionCache.size,\n      maxSize: CACHE_MAX_SIZE,\n      entries: Array.from(positionCache.keys()).slice(0, 5) // Erste 5 Keys als Sample\n    }\n  },\n  \n  /**\n   * Erzwingt Cache-Bereinigung\n   */\n  forceCleanup() {\n    cleanupCache()\n  }\n}","import { useTourStore } from '../stores/useTourStore'\nimport { useRouter } from 'vue-router'\nimport { nextTick } from 'vue'\nimport { useHighlightTracker } from '../composables/useHighlightTracker'\nimport { calculateOptimalPosition, createPositionUpdateCallback, cacheManager } from '../utils/tooltipPositioning'\n\nclass TourService {\n  constructor() {\n    this.store = null\n    this.router = null\n    this.observers = new Map()\n    this.animationFrame = null\n    this.isInitialized = false\n    this.manualTooltipPosition = null\n    this.highlightTracker = null\n    this.positionUpdateCallback = null\n    this.lastCalculatedPosition = null\n    this.tooltipResizeObserver = null\n    \n    // Performance Tracking\n    this.performanceMetrics = {\n      positionCalculations: 0,\n      cacheHits: 0,\n      averageCalculationTime: 0,\n      lastCalculationTime: 0\n    }\n    \n    // RAF-basierte Update-Queue\n    this.updateQueue = new Set()\n    this.rafUpdateId = null\n  }\n  \n  // Initialize service with Vue app context\n  init(app) {\n    if (this.isInitialized) return\n    \n    // Get store and router from app\n    this.store = useTourStore()\n    // Get router from app instance\n    this.router = app.config.globalProperties.$router\n    \n    // Initialize highlight tracker\n    this.highlightTracker = useHighlightTracker()\n    \n    // Initialize throttled position update callback\n    this.positionUpdateCallback = createPositionUpdateCallback(\n      (bounds, element) => this.handleElementBoundsUpdate(bounds, element),\n      16 // 60fps\n    )\n    \n    this.isInitialized = true\n    \n    // Set up global event listeners\n    this.setupEventListeners()\n    \n    console.log('[TourService] Initialized successfully')\n  }\n  \n  // Setup global event listeners\n  setupEventListeners() {\n    // Handle keyboard navigation for tour\n    document.addEventListener('keydown', (e) => {\n      if (!this.store.isActive) return\n      \n      switch (e.key) {\n        case 'Escape':\n          this.stopTour('escape_key')\n          break\n        case 'ArrowRight':\n        case ' ': // Spacebar\n          e.preventDefault()\n          if (this.store.canGoNext || this.store.isLastStep) {\n            this.nextStep()\n          }\n          break\n        case 'ArrowLeft':\n          e.preventDefault()\n          if (this.store.canGoPrevious) {\n            this.previousStep()\n          }\n          break\n        case 'Enter':\n          e.preventDefault()\n          if (this.store.isLastStep) {\n            this.stopTour('completed')\n          } else if (this.store.canGoNext) {\n            this.nextStep()\n          }\n          break\n      }\n    })\n    \n    // Handle window resize to reposition tooltip\n    window.addEventListener('resize', this.debounce(() => {\n      if (this.store.isActive && this.store.currentStep) {\n        this.updateTooltipPosition()\n      }\n    }, 250))\n  }\n  \n  // Main Tour Control Methods\n  async startTour(tourId = 'main', options = {}) {\n    try {\n      // Ensure tour is registered\n      const tour = this.store.availableTours.find(t => t.id === tourId)\n      if (!tour) {\n        console.error(`[TourService] Tour '${tourId}' not found`)\n        return false\n      }\n      \n      // Start tour in store\n      const success = this.store.startTour(tourId, options)\n      if (!success) return false\n      \n      // Wait for DOM update\n      await nextTick()\n      \n      // Navigate to first step\n      await this.executeStep(this.store.currentStep)\n      \n      console.log(`[TourService] Started tour '${tourId}'`)\n      return true\n      \n    } catch (error) {\n      console.error('[TourService] Error starting tour:', error)\n      this.store.stopTour('error')\n      return false\n    }\n  }\n  \n  stopTour(reason = 'user_action') {\n    this.store.stopTour(reason)\n    this.clearHighlights()\n    this.cancelPendingAnimations()\n    this.cleanupTooltipObservers()\n    this.cancelPendingUpdates()\n    this.manualTooltipPosition = null // Reset manual position\n    this.lastCalculatedPosition = null\n    \n    // Performance: Log metrics on tour end\n    this.logPerformanceMetrics()\n    \n    console.log(`[TourService] Stopped tour (${reason})`)\n  }\n  \n  pauseTour() {\n    this.store.pauseTour()\n    console.log('[TourService] Paused tour')\n  }\n  \n  resumeTour() {\n    this.store.resumeTour()\n    if (this.store.currentStep) {\n      this.executeStep(this.store.currentStep)\n    }\n    console.log('[TourService] Resumed tour')\n  }\n  \n  async nextStep() {\n    if (!this.store.canGoNext && !this.store.isLastStep) return false\n    \n    const success = this.store.nextStep()\n    if (success && this.store.currentStep) {\n      await this.executeStep(this.store.currentStep)\n    }\n    return success\n  }\n  \n  async previousStep() {\n    if (!this.store.canGoPrevious) return false\n    \n    const success = this.store.previousStep()\n    if (success && this.store.currentStep) {\n      await this.executeStep(this.store.currentStep)\n    }\n    return success\n  }\n  \n  async goToStep(stepIndex) {\n    const success = this.store.goToStep(stepIndex)\n    if (success && this.store.currentStep) {\n      await this.executeStep(this.store.currentStep)\n    }\n    return success\n  }\n  \n  // Step Execution\n  async executeStep(step) {\n    if (!step) return\n    \n    try {\n      this.store.isLoading = true\n      \n      // Navigate to required route if needed\n      if (step.route && this.router.currentRoute.value.path !== step.route) {\n        await this.navigateToRoute(step.route)\n      }\n      \n      // Wait for element to be available\n      let element = await this.waitForElement(step.target)\n      if (!element) {\n        console.warn(`[TourService] Target element '${step.target}' not found`)\n        return\n      }\n      \n      // Execute step actions and wait for reactive updates\n      if (step.actions?.onEnter) {\n        await step.actions.onEnter()\n        await nextTick()\n        \n        // Wait a bit more for reactive updates to propagate\n        await new Promise(resolve => setTimeout(resolve, 100))\n        \n        // Re-check if element exists after state changes\n        const updatedElement = await this.waitForElement(step.target, 2000)\n        if (updatedElement) {\n          element = updatedElement\n        }\n      }\n      \n      // Scroll to element\n      await this.scrollToElement(step.target)\n      \n      // Wait for scroll to complete before highlighting\n      await nextTick()\n      \n      // Highlight element with dynamic tracking\n      const highlightSuccess = this.highlightElement(step.target, step.highlightOptions)\n      if (!highlightSuccess) {\n        console.warn(`[TourService] Failed to highlight element '${step.target}'`)\n      }\n      \n      // Position tooltip after highlighting\n      await this.updateTooltipPosition(element, step.position)\n      \n      // Show overlay and tooltip\n      this.store.overlayVisible = true\n      this.store.tooltipVisible = true\n      \n      // Final wait to ensure everything is rendered\n      await nextTick()\n      \n    } catch (error) {\n      console.error('[TourService] Error executing step:', error)\n    } finally {\n      this.store.isLoading = false\n    }\n  }\n  \n  // Navigation Methods\n  async navigateToRoute(route) {\n    return new Promise((resolve) => {\n      this.router.push(route).then(() => {\n        // Wait a bit longer for route transition\n        setTimeout(resolve, 300)\n      })\n    })\n  }\n  \n  async scrollToElement(selector, behavior = 'smooth') {\n    const element = document.querySelector(selector)\n    if (!element) return false\n    \n    // Get element position\n    const rect = element.getBoundingClientRect()\n    const isInViewport = rect.top >= 0 && rect.bottom <= window.innerHeight\n    \n    if (!isInViewport) {\n      element.scrollIntoView({\n        behavior: this.store.skipAnimations ? 'auto' : behavior,\n        block: 'center',\n        inline: 'nearest'\n      })\n      \n      // Wait for scroll to complete\n      await new Promise(resolve => setTimeout(resolve, 500))\n    }\n    \n    return true\n  }\n  \n  // Element Management\n  async waitForElement(selector, timeout = 5000) {\n    return new Promise((resolve) => {\n      const element = document.querySelector(selector)\n      if (element) {\n        resolve(element)\n        return\n      }\n      \n      // Set up observer\n      const observer = new MutationObserver(() => {\n        const element = document.querySelector(selector)\n        if (element) {\n          observer.disconnect()\n          clearTimeout(timeoutId)\n          resolve(element)\n        }\n      })\n      \n      // Start observing\n      observer.observe(document.body, {\n        childList: true,\n        subtree: true\n      })\n      \n      // Set timeout\n      const timeoutId = setTimeout(() => {\n        observer.disconnect()\n        resolve(null)\n      }, timeout)\n    })\n  }\n  \n  highlightElement(selector, options = {}) {\n    const element = document.querySelector(selector)\n    if (!element) return false\n    \n    // Remove previous highlights\n    this.clearHighlights()\n    \n    // Start dynamic tracking for this element\n    const success = this.highlightTracker.startTracking(\n      selector,\n      (bounds, element) => {\n        // Update store with new bounds\n        this.store.setHighlightedElement(selector, bounds)\n        // Trigger tooltip position recalculation\n        this.positionUpdateCallback(bounds, element)\n      },\n      {\n        padding: options.padding || 8,\n        throttle: 16 // 60fps updates\n      }\n    )\n    \n    if (!success) return false\n    \n    // Add highlight class for CSS styling\n    element.classList.add('tour-highlight')\n    \n    // Ensure element is above backdrop but below tooltip\n    const originalZIndex = element.style.zIndex\n    element.style.zIndex = '9998'\n    element.setAttribute('data-original-z-index', originalZIndex || '')\n    \n    return true\n  }\n  \n  clearHighlights() {\n    // Stop all dynamic tracking\n    if (this.highlightTracker) {\n      this.highlightTracker.stopAllTracking()\n    }\n    \n    // Remove highlight classes and restore z-index\n    document.querySelectorAll('.tour-highlight').forEach(el => {\n      el.classList.remove('tour-highlight')\n      \n      // Restore original z-index\n      const originalZIndex = el.getAttribute('data-original-z-index')\n      if (originalZIndex) {\n        el.style.zIndex = originalZIndex\n      } else {\n        el.style.removeProperty('z-index')\n      }\n      el.removeAttribute('data-original-z-index')\n    })\n    \n    // Clear store\n    this.store.setHighlightedElement(null, null)\n  }\n  \n  async updateTooltipPosition(element = null, preferredPosition = 'auto') {\n    // Performance: Start timing\n    const startTime = performance.now()\n    \n    // If user has manually positioned the tooltip, keep that position\n    if (this.manualTooltipPosition) {\n      this.store.setTooltipPosition(this.manualTooltipPosition)\n      return\n    }\n    \n    if (!element && this.store.highlightedElement) {\n      element = document.querySelector(this.store.highlightedElement)\n    }\n    \n    if (!element) return\n    \n    // Wait for next tick to ensure DOM is updated\n    await nextTick()\n    \n    const elementBounds = element.getBoundingClientRect()\n    const viewport = {\n      width: window.innerWidth,\n      height: window.innerHeight\n    }\n    \n    // Get current tooltip content size\n    const contentSize = this.getTooltipContentSize()\n    \n    // Get current tooltip constraints from store\n    const constraints = this.store.tooltipConstraints || {\n      minWidth: 300,\n      maxWidth: 600,\n      minHeight: 200,\n      maxHeight: 500\n    }\n    \n    // Calculate optimal position and size\n    const result = calculateOptimalPosition(\n      elementBounds,\n      contentSize,\n      viewport,\n      {\n        preferredPosition,\n        constraints,\n        adaptive: true,\n        useCache: true // Enable caching for performance\n      }\n    )\n    \n    // Performance: Track metrics\n    const calculationTime = performance.now() - startTime\n    this.updatePerformanceMetrics(calculationTime, result.fromCache)\n    \n    // Update store with new position and dimensions\n    this.store.setTooltipPosition({\n      top: result.position.top,\n      left: result.position.left\n    })\n    \n    this.store.setTooltipDimensions(result.size)\n    \n    // Update floating mode state\n    this.store.setFloatingMode(result.metadata.isFloating || false)\n    \n    // Store positioning metadata for debugging and future optimizations\n    this.store.setPositioningMetadata({\n      position: result.metadata.position,\n      isOptimal: result.metadata.isOptimal,\n      hasOverlap: result.metadata.hasOverlap,\n      isVisible: result.metadata.isVisible,\n      wasResized: result.metadata.wasResized,\n      originalSize: result.metadata.originalSize,\n      timestamp: Date.now()\n    })\n    \n    // Store calculation result for debugging\n    this.lastCalculatedPosition = {\n      ...result,\n      timestamp: Date.now(),\n      elementBounds,\n      viewport\n    }\n    \n    // Log positioning info for debugging\n    if (result.metadata.isFloating) {\n      console.log('[TourService] Using floating position:', result.metadata.position)\n    }\n    \n    if (result.metadata.wasResized) {\n      console.log('[TourService] Tooltip was resized:', {\n        original: result.metadata.originalSize,\n        final: result.size\n      })\n    }\n    \n    if (result.metadata.hasOverlap) {\n      console.warn('[TourService] Tooltip still overlaps with element despite calculations')\n    }\n    \n    return result\n  }\n  \n  \n  // Tour Registration\n  registerTour(tour) {\n    this.store.registerTour(tour)\n  }\n  \n  registerTours(tours) {\n    tours.forEach(tour => this.registerTour(tour))\n  }\n  \n  // Utility Methods\n  debounce(func, wait) {\n    let timeout\n    return function executedFunction(...args) {\n      const later = () => {\n        clearTimeout(timeout)\n        func(...args)\n      }\n      clearTimeout(timeout)\n      timeout = setTimeout(later, wait)\n    }\n  }\n  \n  cancelPendingAnimations() {\n    if (this.animationFrame) {\n      cancelAnimationFrame(this.animationFrame)\n      this.animationFrame = null\n    }\n  }\n  \n  // Manual positioning\n  setManualTooltipPosition(position) {\n    this.manualTooltipPosition = {\n      left: position.x,\n      top: position.y\n    }\n  }\n  \n  resetManualTooltipPosition() {\n    this.manualTooltipPosition = null\n  }\n  \n  // New helper methods for intelligent positioning\n  \n  /**\n   * Handles real-time element bounds updates from highlightTracker\n   * @param {Object} bounds - Updated element bounds\n   * @param {Element} element - The tracked element\n   */\n  handleElementBoundsUpdate(bounds, element) {\n    if (!this.store.isActive || !this.store.tooltipVisible) return\n    \n    // Only update if bounds actually changed significantly\n    if (this.lastCalculatedPosition && this.boundsChangedSignificantly(bounds, this.lastCalculatedPosition.elementBounds)) {\n      // Check if current tooltip position now overlaps with new element bounds\n      const currentTooltipBounds = this.getCurrentTooltipBounds()\n      \n      if (currentTooltipBounds && this.checkCurrentOverlap(bounds, currentTooltipBounds)) {\n        // Immediate overlap detected, recalculate position with higher priority\n        console.log('[TourService] Overlap detected during bounds update, recalculating position')\n        this.updateTooltipPosition(element)\n      } else if (this.lastCalculatedPosition && Date.now() - this.lastCalculatedPosition.timestamp > 1000) {\n        // Periodic recalculation to ensure optimal positioning\n        this.updateTooltipPosition(element)\n      }\n    }\n  }\n  \n  /**\n   * Checks if element bounds changed significantly enough to warrant repositioning\n   * @param {Object} newBounds - New element bounds\n   * @param {Object} oldBounds - Previous element bounds\n   * @returns {boolean} True if significant change detected\n   */\n  boundsChangedSignificantly(newBounds, oldBounds) {\n    if (!oldBounds) return true\n    \n    const threshold = 5 // pixels\n    return Math.abs(newBounds.top - oldBounds.top) > threshold ||\n           Math.abs(newBounds.left - oldBounds.left) > threshold ||\n           Math.abs(newBounds.width - oldBounds.width) > threshold ||\n           Math.abs(newBounds.height - oldBounds.height) > threshold\n  }\n  \n  /**\n   * Gets the natural content size of the tooltip\n   * @returns {Object} Content size {width, height}\n   */\n  getTooltipContentSize() {\n    const tooltipEl = document.querySelector('.tour-tooltip')\n    \n    if (!tooltipEl) {\n      return { width: 400, height: 300 } // Default size\n    }\n    \n    // Get current size or measure content\n    const currentRect = tooltipEl.getBoundingClientRect()\n    \n    // If tooltip is already visible, use its current size as baseline\n    if (currentRect.width > 0 && currentRect.height > 0) {\n      return {\n        width: currentRect.width,\n        height: currentRect.height\n      }\n    }\n    \n    // Fallback: measure content by temporarily making visible\n    const originalStyle = {\n      position: tooltipEl.style.position,\n      visibility: tooltipEl.style.visibility,\n      top: tooltipEl.style.top,\n      left: tooltipEl.style.left\n    }\n    \n    tooltipEl.style.position = 'absolute'\n    tooltipEl.style.visibility = 'hidden'\n    tooltipEl.style.top = '-9999px'\n    tooltipEl.style.left = '-9999px'\n    \n    const measuredRect = tooltipEl.getBoundingClientRect()\n    const contentSize = {\n      width: measuredRect.width || 400,\n      height: measuredRect.height || 300\n    }\n    \n    // Restore original styles\n    Object.assign(tooltipEl.style, originalStyle)\n    \n    return contentSize\n  }\n  \n  /**\n   * Sets up ResizeObserver for tooltip content to detect size changes\n   * @param {Element} tooltipElement - The tooltip DOM element\n   */\n  setupTooltipResizeObserver(tooltipElement) {\n    if (!window.ResizeObserver || this.tooltipResizeObserver) return\n    \n    this.tooltipResizeObserver = new ResizeObserver((entries) => {\n      for (const entry of entries) {\n        if (entry.target === tooltipElement) {\n          // Content size changed, recalculate position\n          const newSize = {\n            width: entry.contentRect.width,\n            height: entry.contentRect.height\n          }\n          \n          // Only update if user hasn't manually positioned\n          if (!this.manualTooltipPosition) {\n            this.updateTooltipPosition()\n          }\n        }\n      }\n    })\n    \n    this.tooltipResizeObserver.observe(tooltipElement)\n  }\n  \n  /**\n   * Cleanup method for tooltip observers\n   */\n  cleanupTooltipObservers() {\n    if (this.tooltipResizeObserver) {\n      this.tooltipResizeObserver.disconnect()\n      this.tooltipResizeObserver = null\n    }\n  }\n  \n  /**\n   * Gets current tooltip boundaries from DOM\n   * @returns {Object|null} Current tooltip bounds\n   */\n  getCurrentTooltipBounds() {\n    const tooltipEl = document.querySelector('.tour-tooltip')\n    if (!tooltipEl) return null\n    \n    const rect = tooltipEl.getBoundingClientRect()\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height,\n      bottom: rect.bottom,\n      right: rect.right\n    }\n  }\n  \n  /**\n   * Checks if tooltip currently overlaps with element\n   * @param {Object} elementBounds - Element boundaries\n   * @param {Object} tooltipBounds - Tooltip boundaries  \n   * @returns {boolean} True if overlap detected\n   */\n  checkCurrentOverlap(elementBounds, tooltipBounds) {\n    // Import the function at the top of the class instead\n    return !(tooltipBounds.right < elementBounds.left || \n             tooltipBounds.left > elementBounds.right || \n             tooltipBounds.bottom < elementBounds.top || \n             tooltipBounds.top > elementBounds.bottom)\n  }\n  \n  /**\n   * Force recalculation of tooltip position (for edge cases)\n   * @param {string} reason - Reason for forced recalculation\n   */\n  forcePositionRecalculation(reason = 'manual') {\n    console.log(`[TourService] Forcing position recalculation: ${reason}`)\n    \n    if (!this.store.isActive || !this.store.tooltipVisible) return\n    \n    const element = this.store.highlightedElement \n      ? document.querySelector(this.store.highlightedElement)\n      : null\n      \n    if (element) {\n      // Reset manual position temporarily to allow recalculation\n      const wasManual = this.manualTooltipPosition\n      this.manualTooltipPosition = null\n      \n      this.updateTooltipPosition(element).then(() => {\n        // Restore manual position if it was set\n        if (wasManual) {\n          setTimeout(() => {\n            this.manualTooltipPosition = wasManual\n          }, 100)\n        }\n      })\n    }\n  }\n  \n  /**\n   * Debug method to get positioning statistics\n   * @returns {Object} Positioning debug information\n   */\n  getPositioningDebugInfo() {\n    return {\n      lastCalculatedPosition: this.lastCalculatedPosition,\n      manualTooltipPosition: this.manualTooltipPosition,\n      currentTooltipBounds: this.getCurrentTooltipBounds(),\n      performanceMetrics: this.performanceMetrics,\n      cacheStats: cacheManager.getStats(),\n      store: {\n        tooltipPosition: this.store.tooltipPosition,\n        tooltipDimensions: this.store.tooltipDimensions,\n        floatingMode: this.store.floatingMode,\n        positioningMetadata: this.store.positioningMetadata\n      }\n    }\n  }\n  \n  // Performance-Optimierungs-Methoden\n  \n  /**\n   * Updates performance metrics\n   * @param {number} calculationTime - Zeit für Berechnung in ms\n   * @param {boolean} fromCache - Ob Ergebnis aus Cache kam\n   */\n  updatePerformanceMetrics(calculationTime, fromCache = false) {\n    this.performanceMetrics.lastCalculationTime = calculationTime\n    \n    if (fromCache) {\n      this.performanceMetrics.cacheHits++\n    } else {\n      this.performanceMetrics.positionCalculations++\n      \n      // Update average calculation time\n      const totalCalculations = this.performanceMetrics.positionCalculations\n      const currentAverage = this.performanceMetrics.averageCalculationTime\n      this.performanceMetrics.averageCalculationTime = \n        (currentAverage * (totalCalculations - 1) + calculationTime) / totalCalculations\n    }\n  }\n  \n  /**\n   * Logs performance metrics\n   */\n  logPerformanceMetrics() {\n    const metrics = this.performanceMetrics\n    const cacheStats = cacheManager.getStats()\n    \n    console.log('[TourService] Performance Metrics:', {\n      calculations: metrics.positionCalculations,\n      cacheHits: metrics.cacheHits,\n      cacheHitRate: metrics.cacheHits / (metrics.positionCalculations + metrics.cacheHits) * 100,\n      avgCalculationTime: metrics.averageCalculationTime.toFixed(2) + 'ms',\n      lastCalculationTime: metrics.lastCalculationTime.toFixed(2) + 'ms',\n      cacheSize: cacheStats.size\n    })\n  }\n  \n  /**\n   * RAF-basierte Update-Queue für batch updates\n   * @param {Function} updateFn - Update-Funktion\n   */\n  queueUpdate(updateFn) {\n    this.updateQueue.add(updateFn)\n    \n    if (!this.rafUpdateId) {\n      this.rafUpdateId = requestAnimationFrame(() => {\n        // Alle queued updates ausführen\n        for (const updateFn of this.updateQueue) {\n          try {\n            updateFn()\n          } catch (error) {\n            console.error('[TourService] Error in queued update:', error)\n          }\n        }\n        \n        this.updateQueue.clear()\n        this.rafUpdateId = null\n      })\n    }\n  }\n  \n  /**\n   * Cancels all pending RAF updates\n   */\n  cancelPendingUpdates() {\n    if (this.rafUpdateId) {\n      cancelAnimationFrame(this.rafUpdateId)\n      this.rafUpdateId = null\n    }\n    this.updateQueue.clear()\n  }\n  \n  /**\n   * Optimized position update using RAF queue\n   * @param {Element} element - Target element\n   */\n  queuePositionUpdate(element) {\n    this.queueUpdate(() => {\n      this.updateTooltipPosition(element)\n    })\n  }\n  \n  /**\n   * Clear positioning cache (useful for debugging)\n   */\n  clearPositioningCache() {\n    cacheManager.clearCache()\n    console.log('[TourService] Positioning cache cleared')\n  }\n  \n  /**\n   * Enable/disable performance optimizations\n   * @param {boolean} enabled - Whether to enable optimizations\n   */\n  setPerformanceOptimizations(enabled) {\n    this.store.setUserPreference('performanceOptimizations', enabled)\n    \n    if (!enabled) {\n      this.clearPositioningCache()\n      console.log('[TourService] Performance optimizations disabled')\n    } else {\n      console.log('[TourService] Performance optimizations enabled')\n    }\n  }\n  \n  // Data Integration Helpers (for tour content)\n  async setProductSelection(product) {\n    // Import stores dynamically to avoid circular dependencies\n    const { useUIStore } = await import('@/stores/useUIStore')\n    const uiStore = useUIStore()\n    uiStore.selectedProduct = product\n    await nextTick()\n    // Wait for reactive updates to propagate\n    await new Promise(resolve => setTimeout(resolve, 50))\n  }\n  \n  async setYearSelection(year) {\n    const { useUIStore } = await import('@/stores/useUIStore')\n    const uiStore = useUIStore()\n    uiStore.selectedYear = year\n    await nextTick()\n    await new Promise(resolve => setTimeout(resolve, 50))\n  }\n  \n  async setCountrySelection(country) {\n    const { useUIStore } = await import('@/stores/useUIStore')\n    const uiStore = useUIStore()\n    uiStore.selectedCountry = country\n    await nextTick()\n    await new Promise(resolve => setTimeout(resolve, 50))\n  }\n  \n  async setMetricSelection(metric) {\n    const { useUIStore } = await import('@/stores/useUIStore')\n    const uiStore = useUIStore()\n    uiStore.selectedMetric = metric\n    await nextTick()\n    await new Promise(resolve => setTimeout(resolve, 50))\n  }\n  \n  // Enhanced method for multiple selections with validation\n  async setUISelections(selections = {}) {\n    const { useUIStore } = await import('@/stores/useUIStore')\n    const uiStore = useUIStore()\n    \n    // Apply all selections\n    if (selections.product !== undefined) uiStore.selectedProduct = selections.product\n    if (selections.country !== undefined) uiStore.selectedCountry = selections.country\n    if (selections.metric !== undefined) uiStore.selectedMetric = selections.metric\n    if (selections.year !== undefined) uiStore.selectedYear = selections.year\n    \n    // Wait for all reactive updates\n    await nextTick()\n    await new Promise(resolve => setTimeout(resolve, 100))\n    \n    // Validate selections were applied\n    const finalState = {\n      product: uiStore.selectedProduct,\n      country: uiStore.selectedCountry,\n      metric: uiStore.selectedMetric,\n      year: uiStore.selectedYear\n    }\n    \n    console.log('[TourService] UI selections applied:', finalState)\n    return finalState\n  }\n}\n\n// Export singleton instance\nexport default new TourService()","// D2 Nutrition Vibes Tour System Entry Point\nimport { useTourStore } from './stores/useTourStore'\nimport TourService from './services/TourService'\nimport TourOverlay from './components/TourOverlay.vue'\n\n// Tour-System Export\nexport {\n  useTourStore,\n  TourService,\n  TourOverlay\n}\n\n// Initialize Tour System\nexport const initializeTourSystem = (app) => {\n  // Use existing singleton instance\n  const tourService = TourService\n  \n  // Initialize with app context\n  tourService.init(app)\n  \n  // Provide tour service globally\n  app.provide('tourService', tourService)\n  \n  // Global properties for easy access\n  app.config.globalProperties.$tour = tourService\n  \n  return tourService\n}\n\n// Tour System Plugin\nexport default {\n  install(app, options = {}) {\n    const tourService = initializeTourSystem(app)\n    \n    // Auto-register Tour Overlay component globally\n    app.component('TourOverlay', TourOverlay)\n    \n    // Initialize tour data if provided\n    if (options.tours) {\n      tourService.registerTours(options.tours)\n    }\n    \n    // Auto-start tour if configured\n    if (options.autoStart && !localStorage.getItem('tour-completed')) {\n      tourService.startTour(options.autoStart)\n    }\n  }\n}","// Tour Steps Configuration - \"Ernährung im Wandel der Zeit\"\n// Integration of FAO data insights with world events\n\nexport const mainTour = {\n  id: 'main',\n  title: 'Ernährung im Wandel der Zeit',\n  description: 'Entdecken Sie wie Weltgeschehen unsere Ernährung prägt - von COVID-19 über den Ukraine-Krieg bis zu Klimaextremen',\n  estimatedDuration: '12-15 Minuten',\n  category: 'overview',\n  difficulty: 'beginner',\n  steps: [\n    {\n      id: 'welcome',\n      title: 'Willkommen bei D2 Nutrition Vibes',\n      content: `\n        Diese Tour führt Sie durch <strong>13 Jahre globaler Ernährungsdaten</strong> (2010-2022). \n        Sie werden sehen, wie Pandemien, Kriege und Klimaextreme unsere Nahrungsmittelversorgung \n        beeinflussen. Die <strong>Zeitleiste unten</strong> begleitet uns dabei durch alle wichtigen Ereignisse.\n      `,\n      route: '/',\n      target: '[data-tour=\"dashboard-stats\"]',\n      position: 'bottom',\n      highlightOptions: {\n        padding: 12\n      },\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const { useTourStore } = await import('@/tour/stores/useTourStore')\n          const uiStore = useUIStore()\n          const tourStore = useTourStore()\n          uiStore.selectedProduct = 'Grand Total'\n          uiStore.selectedYear = 2022\n          uiStore.selectedMetric = 'food_supply_kcal'\n          // Set tour mode\n          tourStore.isLoading = false\n        }\n      },\n      dataHighlight: {\n        label: 'Globale Versorgung 2022',\n        value: '2.985 kcal/Person/Tag'\n      },\n      insights: [\n        'Stetiger Anstieg trotz globaler Krisen',\n        'Von 2.832 kcal (2010) auf 2.985 kcal (2022)',\n        'Aber große regionale Unterschiede bleiben'\n      ]\n    },\n\n    {\n      id: 'timeline-introduction',\n      title: 'Die wichtigsten Weltereignisse',\n      content: `\n        In unserer Datenanalyse sehen Sie die Auswirkungen wichtiger <strong>Weltereignisse</strong> \n        auf die globale Ernährung. Von El Niño 2015/16 über COVID-19 bis zum Ukraine-Krieg 2022 - \n        jedes Ereignis hinterließ messbare Spuren.\n      `,\n      route: '/',\n      target: '[data-tour=\"dashboard-stats\"]',\n      position: 'bottom',\n      highlightOptions: {\n        padding: 8\n      },\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const uiStore = useUIStore()\n          uiStore.selectedProduct = 'Grand Total'\n          uiStore.selectedYear = 2022\n        }\n      },\n      insights: [\n        'Klimaereignisse: El Niño, Dürren, Frost',\n        'Pandemie: COVID-19 ab März 2020',\n        'Konflikte: Ukraine-Krieg Februar 2022'\n      ]\n    },\n    \n    {\n      id: 'regional-disparities',\n      title: 'Die Welt isst unterschiedlich',\n      content: `\n        Diese Weltkarte zeigt extreme <strong>regionale Unterschiede</strong>. Während Nordamerika \n        mit 3.880 kcal/Tag im Überfluss lebt, kämpft Afrika mit nur 2.567 kcal/Tag. \n        Die WHO empfiehlt mindestens 2.100 kcal für Erwachsene.\n      `,\n      route: '/',\n      target: '[data-tour=\"world-map\"]',\n      position: 'right',\n      highlightOptions: {\n        padding: 8\n      },\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const uiStore = useUIStore()\n          uiStore.selectedProduct = 'Grand Total'\n          uiStore.selectedMetric = 'food_supply_kcal'\n          uiStore.selectedYear = 2022\n        }\n      },\n      dataHighlight: {\n        label: 'Größte Kluft weltweit',\n        value: 'USA: 3.880 vs. Tschad: 1.620 kcal/Tag'\n      },\n      insights: [\n        'Europa & Nordamerika: Über 3.400 kcal/Tag',\n        'Asien holt auf: +9% seit 2010',\n        'Afrika stagniert: Nur +0,3% in 12 Jahren'\n      ]\n    },\n\n    {\n      id: 'covid-impact-intro',\n      title: 'COVID-19: Die erste globale Krise',\n      content: `\n        März 2020 - die Welt steht still. <strong>Lockdowns und Grenzschließungen</strong> \n        bedrohen die globale Nahrungsmittelversorgung. Schauen wir uns die konkreten \n        Auswirkungen in den Zeitreihen an.\n      `,\n      route: '/timeseries',\n      target: '[data-tour=\"timeseries-chart\"]',\n      position: 'top',\n      highlightOptions: {\n        padding: 16\n      },\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const { useTourStore } = await import('@/tour/stores/useTourStore')\n          const uiStore = useUIStore()\n          const tourStore = useTourStore()\n          uiStore.selectedProduct = 'Rice and products'\n          uiStore.selectedCountry = 'Vietnam'\n          uiStore.selectedMetric = 'export_quantity'\n          // Focus on COVID years\n          uiStore.selectedYearRange = { start: 2019, end: 2021 }\n        }\n      },\n      dataHighlight: {\n        label: 'Vietnam Reis-Exportstopp',\n        value: 'März-April 2020: Temporärer Exportstopp'\n      },\n      insights: [\n        'Panik-Reaktionen: Exportverbote in Asien',\n        'Aber: Schnelle Erholung dank guter Ernten',\n        'Globale Versorgung blieb überraschend stabil'\n      ]\n    },\n\n    {\n      id: 'covid-stockpiling',\n      title: 'Hamstern auf Staatsebene',\n      content: `\n        Während der Pandemie bauten viele Länder <strong>strategische Reserven</strong> auf. \n        Besonders Entwicklungsländer legten ungewöhnlich hohe Vorräte an Reis und Mais an - \n        eine Vorsichtsmaßnahme gegen unsichere Zeiten.\n      `,\n      route: '/timeseries',\n      target: '[data-tour=\"metric-selector\"]',\n      position: 'bottom',\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const uiStore = useUIStore()\n          uiStore.selectedProduct = 'Rice and products'\n          uiStore.selectedCountry = 'Philippines'\n          uiStore.selectedMetric = 'stock_variation'\n          uiStore.selectedYearRange = { start: 2019, end: 2021 }\n        }\n      },\n      dataHighlight: {\n        label: 'Lageraufbau 2020/21',\n        value: 'Philippinen: +35% Reislager'\n      },\n      insights: [\n        'Positive Stock Variation = Lageraufbau',\n        'Europa baute hingegen Lager ab (-9 Mio t)',\n        'China hortete weiter: 50% der Weltreserven'\n      ]\n    },\n\n    {\n      id: 'ukraine-crisis-wheat',\n      title: 'Ukraine-Krieg: Die Kornkammer brennt',\n      content: `\n        Februar 2022 - Russlands Invasion erschüttert die Getreidemärkte. \n        Die Ukraine exportierte vor dem Krieg <strong>10% des Weltweizens</strong>. \n        Die Auswirkungen sind dramatisch.\n      `,\n      route: '/timeseries',\n      target: '[data-tour=\"timeseries-chart\"]',\n      position: 'top',\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const { useTourStore } = await import('@/tour/stores/useTourStore')\n          const uiStore = useUIStore()\n          const tourStore = useTourStore()\n          uiStore.selectedProduct = 'Wheat and products'\n          uiStore.selectedCountry = 'Ukraine'\n          uiStore.selectedMetric = 'export_quantity'\n          uiStore.selectedYearRange = { start: 2020, end: 2022 }\n          // Highlight Ukraine crisis\n          uiStore.setSelectedYear(2022)\n        }\n      },\n      dataHighlight: {\n        label: 'Weizenexport-Kollaps',\n        value: '2021: 19.768 → 2022: 11.444 Tsd. Tonnen (-42%)'\n      },\n      insights: [\n        'Hafenblockaden im Schwarzen Meer',\n        'Getreidekorridore nur teilweise wirksam',\n        'Weltweite Getreidepreise explodierten'\n      ]\n    },\n\n    {\n      id: 'feed-problem',\n      title: 'Das Tierfutter-Dilemma',\n      content: `\n        Ein kritischer Trend: <strong>41% des weltweiten Getreides</strong> landet in \n        Futtertrögen statt auf Tellern. Seit 2010 stieg der Futterverbrauch um 40% - \n        während Menschen hungern.\n      `,\n      route: '/',\n      target: '[data-tour=\"feed-usage\"]',\n      position: 'left',\n      highlightOptions: {\n        padding: 12\n      },\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const uiStore = useUIStore()\n          uiStore.selectedProduct = 'Maize and products'\n          uiStore.selectedMetric = 'feed'\n          uiStore.selectedYear = 2022\n        }\n      },\n      dataHighlight: {\n        label: 'Mais als Tierfutter',\n        value: '2022: 717 Mio. Tonnen (+47% seit 2010)'\n      },\n      insights: [\n        'China verfüttert 222 Mio. t Mais (2022)',\n        'USA: 138 Mio. t - gleichbleibend hoch',\n        'Nur 48% des Getreides für Menschen'\n      ]\n    },\n\n    {\n      id: 'ml-predictions',\n      title: 'KI blickt in die Zukunft',\n      content: `\n        Unsere <strong>Machine Learning Modelle</strong> prognostizieren die Entwicklung \n        bis 2025. Die Vorhersagen berücksichtigen Klimawandel, Bevölkerungswachstum \n        und historische Trends.\n      `,\n      route: '/ml-predictions',\n      target: '[data-tour=\"ml-chart\"]',\n      position: 'top',\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const uiStore = useUIStore()\n          uiStore.selectedProduct = 'Wheat and products'\n          uiStore.selectedMetric = 'production'\n        }\n      },\n      dataHighlight: {\n        label: 'Weizenproduktion 2025',\n        value: 'Prognose: +3,2% gegenüber 2022'\n      },\n      insights: [\n        'Unsicherheit durch Klimaextreme steigt',\n        'Technologischer Fortschritt als Hoffnung',\n        'Regionale Verschiebungen erwartet'\n      ]\n    },\n\n    {\n      id: 'simulation-scenarios',\n      title: 'Was wäre wenn...?',\n      content: `\n        Im <strong>Simulationspanel</strong> können Sie Szenarien durchspielen: \n        Was wenn 20% weniger Getreide verfüttert würde? Wie viele Menschen könnten \n        zusätzlich ernährt werden?\n      `,\n      route: '/simulation',\n      target: '[data-tour=\"simulation-chart\"]',\n      position: 'right',\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const uiStore = useUIStore()\n          uiStore.selectedProduct = 'Cereals - Excluding Beer'\n          uiStore.selectedMetric = 'food_supply_kcal'\n        }\n      },\n      dataHighlight: {\n        label: 'Szenario-Rechnung',\n        value: '20% weniger Futter = 500 Mio. Menschen mehr ernährt'\n      },\n      insights: [\n        'Enorme Effizienzpotenziale vorhanden',\n        'Ernährungsumstellung als Schlüssel',\n        'Politik und Verbraucher gefragt'\n      ]\n    },\n\n    {\n      id: 'brazil-sugar-crisis',\n      title: 'Fallstudie: Brasiliens Zuckerkrise',\n      content: `\n        2021 traf Brasilien eine <strong>Jahrhundertdürre gefolgt von Frost</strong>. \n        Die Zuckerrohrproduktion brach um 17% ein - mit globalen Folgen, da Brasilien \n        der größte Zuckerexporteur ist.\n      `,\n      route: '/timeseries',\n      target: '[data-tour=\"timeseries-chart\"]',\n      position: 'top',\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const { useTourStore } = await import('@/tour/stores/useTourStore')\n          const uiStore = useUIStore()\n          const tourStore = useTourStore()\n          uiStore.selectedProduct = 'Sugar cane'\n          uiStore.selectedCountry = 'Brazil'\n          uiStore.selectedMetric = 'production'\n          uiStore.selectedYearRange = { start: 2019, end: 2022 }\n          // Focus on Brazil frost year\n          uiStore.setSelectedYear(2021)\n        }\n      },\n      dataHighlight: {\n        label: 'Produktionseinbruch',\n        value: '2021: -13,3% auf 525 Mio. Tonnen'\n      },\n      insights: [\n        'Niedrigste Erträge seit 2003',\n        'Weltmarkt-Zuckerpreise auf 4-Jahres-Hoch',\n        'Mehr Zuckerrohr musste zu Ethanol werden'\n      ]\n    },\n\n    {\n      id: 'palm-oil-volatility',\n      title: 'Palmöl: Spielball des Klimas',\n      content: `\n        Palmöl aus Indonesien und Malaysia versorgt die Welt. Doch <strong>El Niño</strong> \n        und andere Klimaphänomene machen die Produktion unberechenbar. 2022 verhängte \n        Indonesien sogar einen Exportstopp.\n      `,\n      route: '/timeseries',\n      target: '[data-tour=\"year-selector\"]',\n      position: 'bottom',\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const uiStore = useUIStore()\n          uiStore.selectedProduct = 'Palm oil'\n          // uiStore.selectedCountry = 'Indonesia' // Removed to prevent automatic Indonesia selection\n          uiStore.selectedMetric = 'export_quantity'\n          uiStore.selectedYearRange = { start: 2015, end: 2022 }\n        }\n      },\n      dataHighlight: {\n        label: '2022 Exportstopp',\n        value: 'April-Mai: Kompletter Exportstopp'\n      },\n      insights: [\n        '2016: El Niño -10% Produktion',\n        '2020: Arbeitskräftemangel durch COVID',\n        'Preisvolatilität bedroht Ernährungssicherheit'\n      ]\n    },\n\n    {\n      id: 'conclusion',\n      title: 'Lehren für die Zukunft',\n      content: `\n        Unsere Datenreise zeigt: Die globale Ernährung ist <strong>resilienter als gedacht</strong>, \n        aber auch verwundbarer durch Klimawandel und Konflikte. Positive Trends existieren, \n        doch die Herausforderungen wachsen.\n      `,\n      route: '/',\n      target: '[data-tour=\"dashboard-overview\"]',\n      position: 'center',\n      actions: {\n        onEnter: async () => {\n          const { useUIStore } = await import('@/stores/useUIStore')\n          const { useTourStore } = await import('@/tour/stores/useTourStore')\n          const uiStore = useUIStore()\n          const tourStore = useTourStore()\n          uiStore.selectedProduct = 'Grand Total'\n          uiStore.selectedYear = 2022\n          // Reset to current year\n          uiStore.setSelectedYear(2022)\n        }\n      },\n      dataHighlight: {\n        label: 'Kernbotschaft',\n        value: 'Daten ermöglichen bessere Entscheidungen'\n      },\n      insights: [\n        '✅ Resiliente Lieferketten bewährten sich',\n        '⚠️ Klimarisiken nehmen dramatisch zu',\n        '🌍 Regionale Ungleichheiten bleiben kritisch',\n        '🔄 Nachhaltige Transformation ist möglich'\n      ]\n    }\n  ]\n}\n\n// Export only the main tour\nexport const availableTours = [mainTour]\n\nexport default {\n  mainTour,\n  availableTours\n}","import { createApp } from 'vue'\nimport { createPinia } from 'pinia'\n\nimport router from './router'\nimport App from './App.vue'\nimport './assets/styles/tailwind.css'\nimport './tour/styles/tour.css'\n\n// Import tour system\nimport TourPlugin from './tour'\nimport { availableTours } from './tour/config/tourSteps'\n\n// Create Pinia store\nconst pinia = createPinia()\n\n// Create and mount Vue app\nconst app = createApp(App)\n\n// Vue performance optimizations\napp.config.performance = true\n\n// Global error handler\napp.config.errorHandler = (error, instance, info) => {\n  console.error('Vue Error:', error)\n  console.error('Component:', instance)\n  console.error('Error Info:', info)\n  \n  // Send to error reporting service in production\n  if (import.meta.env.PROD) {\n    // TODO: Implement error reporting service\n    console.error('Production error:', { error: error.message, stack: error.stack, info })\n  }\n}\n\n// Global warning handler\napp.config.warnHandler = (msg, instance, trace) => {\n  console.warn('Vue Warning:', msg)\n  if (instance) {\n    console.warn('Component:', instance)\n  }\n  console.warn('Trace:', trace)\n}\n\napp.use(router)\napp.use(pinia)\n\n// Initialize tour system\napp.use(TourPlugin, {\n  tours: availableTours,\n  autoStart: false // Don't auto-start tour\n})\n\n\napp.mount('#app')"],"file":"assets/main-DzZauRPv.js"}
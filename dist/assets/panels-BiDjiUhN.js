import{a as e,u as t}from"./stores-D-HQzOOg.js";import{T as a,W as r,S as s,M as n}from"./visualizations-D5gvM8XN.js";import{d as i,r as l,c as o,o as c,a as d,w as u,e as g,f as h,g as m,t as p,F as f,h as v,i as y,j as b,k,l as x,m as _,p as S,q as w,s as M}from"./vue-vendor-Cpenns3E.js";import{M as P,S as C,E,a as z,R as D,B as F,L as O}from"./ui-components-8C-aqfMN.js";import{u as A}from"./composables-2t9wd6u3.js";const G=(e,t)=>{const a=e.__vccOpts||e;for(const[r,s]of t)a[r]=s;return a};function L(e,t={}){const{unit:a="1000 t",precision:r=null,showUnit:s=!0,longForm:n=!1}=t;if(null==e||isNaN(e))return s?`0 ${a}`:"0";const i=Math.abs(e);let l,o=a;return"kcal/capita/day"===a?(l=e.toFixed(r??0),o=n?"kcal/Person/Tag":"kcal"):"1000 t"===a?i>=1e6?(l=(e/1e6).toFixed(r??1),o=n?"Mrd. t":"Mrd t"):i>=1e3?(l=(e/1e3).toFixed(r??1),o=n?"Mio. t":"Mio t"):i>=100?(l=e.toFixed(r??0),o=n?"Tsd. t":"Tsd t"):(l=e.toFixed(r??1),o=n?"Tsd. t":"Tsd t"):i>=1e9?(l=(e/1e9).toFixed(r??1),o=n?`Mrd. ${a}`:`Mrd ${a}`):i>=1e6?(l=(e/1e6).toFixed(r??1),o=n?`Mio. ${a}`:`Mio ${a}`):i>=1e3?(l=(e/1e3).toFixed(r??1),o=n?`Tsd. ${a}`:`Tsd ${a}`):(l=e.toFixed(r??(i<10?1:0)),o=a),s?`${l} ${o}`:l}function B(e="1000 t"){return t=>function(e,t="1000 t"){return L(e,{unit:t,showUnit:!1,precision:0})}(t,e)}function R(e="1000 t"){return t=>function(e,t="1000 t"){return L(e,{unit:t,showUnit:!0,longForm:!0,precision:1})}(t,e)}const V={class:"space-y-6"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},j={class:"card"},T={class:"card-body"},I={class:"flex items-center"},U={class:"ml-4"},K={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},q={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},N={class:"text-sm text-gray-500 dark:text-gray-400"},H={class:"card"},Z={class:"card-body"},$={class:"flex items-center"},Y={class:"ml-4"},J={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},Q={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},X={class:"text-sm text-gray-500 dark:text-gray-400"},ee={class:"card"},te={class:"card-body"},ae={class:"flex items-center"},re={class:"ml-4"},se={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},ne={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},ie={class:"text-sm text-gray-500 dark:text-gray-400"},le={class:"card","data-tour":"feed-usage"},oe={class:"card-body"},ce={class:"flex items-center"},de={class:"ml-4"},ue={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},ge={class:"text-sm text-gray-500 dark:text-gray-400"},he={key:0,class:"card"},me={class:"card-header"},pe={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},fe={class:"card-body"},ve={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ye={class:"text-center"},be={class:"text-xl font-bold text-primary-600 dark:text-primary-400"},ke={class:"text-center"},xe={class:"text-xl font-bold text-secondary-600 dark:text-secondary-400"},_e={class:"text-center"},Se={class:"text-xl font-bold text-success-600 dark:text-success-400"},we={class:"text-center"},Me={class:"text-xl font-bold text-gray-600 dark:text-gray-400"},Pe={class:"card"},Ce={class:"card-header"},Ee={class:"flex space-x-2"},ze=["onClick"],De={class:"card-body"},Fe={key:0,class:"h-[600px] w-full relative","data-tour":"world-map"},Oe={key:1,class:"h-96 p-4"},Ae={key:2,class:"p-4 overflow-hidden"},Ge={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 max-w-full"},Le={class:"bg-gray-50 dark:bg-gray-900 rounded-lg overflow-hidden min-h-[700px] flex flex-col"},Be={class:"flex-1 w-full"},Re={class:"bg-gray-50 dark:bg-gray-900 rounded-lg overflow-hidden min-h-[700px] flex flex-col"},Ve={class:"flex-1 w-full"},We={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 overflow-hidden","data-tour":"top-countries"},je={class:"space-y-2 max-h-96 overflow-y-auto"},Te={class:"flex items-center space-x-3"},Ie={class:"w-6 h-6 bg-primary-100 dark:bg-primary-900/20 rounded-full flex items-center justify-center text-xs font-medium text-primary-600 dark:text-primary-400"},Ue={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Ke={class:"text-sm text-gray-600 dark:text-gray-400"},qe={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 overflow-hidden"},Ne={class:"space-y-3"},He={class:"flex justify-between"},Ze={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},$e={class:"flex justify-between"},Ye={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Je={class:"flex justify-between"},Qe={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Xe={class:"flex justify-between"},et={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},tt={class:"card","data-tour":"quick-actions"},at={class:"card-body"},rt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"};const st=G(i({__name:"DashboardPanel",setup(s,{expose:n}){n();const i=e(),g=t(),h=l("world-map"),m=l(!1),p=l(400),f=()=>{const e=g.selectedProduct,t=g.selectedYear,a=g.selectedMetric;if(!!i.timeseriesData&&i.timeseriesData[e]){const r="production"===a?"production":"import_quantity"===a?"imports":"export_quantity"===a?"exports":"feed"===a?"feed":"food_supply_kcal"===a?"food_supply_kcal":"domestic_supply",s=i.timeseriesData[e];return Object.entries(s).map(([e,s])=>{const n=s.find(e=>e.year===t),i=n&&n[r]||0;let l=(null==n?void 0:n.unit)||"1000 t";return"food_supply_kcal"===a&&(l="kcal/capita/day"),{country:e,value:i,unit:l,year:t}}).filter(e=>e.value>0)}const r=i.getProductionData(e,t);return r?Array.isArray(r)?r:r.data&&Array.isArray(r.data)?r.data:"object"==typeof r?Object.entries(r).map(([e,a])=>({country:e,value:a.value||0,unit:a.unit||"t",year:a.year||t})):[]:[]},v=o(()=>{if(!g.selectedCountry||!g.selectedProduct||!g.selectedYear)return null;return f().find(e=>e.country===g.selectedCountry)}),y=o(()=>{if(!g.selectedCountry)return"N/A";const e=f().filter(e=>e.value>0).sort((e,t)=>t.value-e.value).findIndex(e=>e.country===g.selectedCountry);return e>=0?e+1:"N/A"}),b=o(()=>{const e=f(),t=["World","Africa","Americas","Asia","Europe","Oceania","Northern America","South America","Central America","Caribbean","Northern Africa","Eastern Africa","Middle Africa","Southern Africa","Western Africa","Eastern Asia","South-eastern Asia","Southern Asia","Western Asia","Central Asia","Eastern Europe","Northern Europe","Southern Europe","Western Europe","Australia and New Zealand","Melanesia","European Union (27)","Small Island Developing States","Least Developed Countries","Land Locked Developing Countries","Low Income Food Deficit Countries","Net Food Importing Developing Countries"];return e.filter(e=>e.value>0&&e.country&&!t.includes(e.country)&&!e.country.toLowerCase().includes("total")).sort((e,t)=>t.value-e.value).slice(0,10)}),k=o(()=>{const e=g.selectedProduct,t=g.selectedYear;if(!e||!t)return{percentage:0,amount:0,unit:"1000 t"};if(i.timeseriesData&&i.timeseriesData[e]){const a=i.timeseriesData[e];let r=0,s=0,n=!1;if(Object.values(a).forEach(e=>{const a=e.find(e=>e.year===t);if(a){r+=a.production||0;const e=a.feed||0;s+=e,e>0&&(n=!0)}}),n&&r>0){return{percentage:Math.round(s/r*100),amount:s,unit:"1000 t"}}}return{percentage:0,amount:0,unit:"1000 t"}}),x=o(()=>{const e=g.selectedProduct,t=g.selectedYear,a=g.selectedMetric,r=!!i.timeseriesData;if(!e||!t)return{total:0,countries:0,topProducer:null,unit:"1000 t"};let s=null,n=[];if(r&&i.timeseriesData[e]){const r="production"===a?"production":"import_quantity"===a?"imports":"export_quantity"===a?"exports":"feed"===a?"feed":"food_supply_kcal"===a?"food_supply_kcal":"domestic_supply",s=i.timeseriesData[e];n=Object.entries(s).map(([e,s])=>{const n=s.find(e=>e.year===t),i=n&&n[r]||0;let l=(null==n?void 0:n.unit)||"1000 t";return"food_supply_kcal"===a&&(l="kcal/capita/day"),{country:e,value:i,unit:l,year:t}}).filter(e=>e.value>0)}else s=i.getProductionData(e,t);if(!s&&0===n.length)return{total:0,countries:0,topProducer:null,unit:"1000 t"};s&&0===n.length&&(Array.isArray(s)?n=s:s.data&&Array.isArray(s.data)?n=s.data:"object"==typeof s&&(n=Object.entries(s).map(([e,a])=>({country:e,value:a.value||0,unit:a.unit||"1000 t",year:a.year||t}))));const l=n.filter(e=>e&&e.value>0),o="food_supply_kcal"===g.selectedMetric?l.length>0?l.reduce((e,t)=>e+(t.value||0),0)/l.length:0:l.reduce((e,t)=>e+(t.value||0),0);l.length;const c=["World","Africa","Americas","Asia","Europe","Oceania","Northern America","South America","Central America","Caribbean","Northern Africa","Eastern Africa","Middle Africa","Southern Africa","Western Africa","Eastern Asia","South-eastern Asia","Southern Asia","Western Asia","Central Asia","Eastern Europe","Northern Europe","Southern Europe","Western Europe","Australia and New Zealand","Melanesia","European Union (27)","Small Island Developing States","Least Developed Countries","Land Locked Developing Countries","Low Income Food Deficit Countries","Net Food Importing Developing Countries"],d=l.filter(e=>e.country&&!c.includes(e.country)&&!e.country.toLowerCase().includes("total")),u=d.length>0?d.reduce((e,t)=>(t.value||0)>((null==e?void 0:e.value)||0)?t:e,null):null;let h="1000 t";return"food_supply_kcal"===a?h="kcal/capita/day":l.length>0&&l[0].unit&&(h=l[0].unit),{total:o,countries:d.length,topProducer:null==u?void 0:u.country,unit:h}});c(async()=>{i.hasData||await i.initializeApp();try{await new Promise(e=>setTimeout(e,100)),i.timeseriesData&&i.timeseriesData[g.selectedProduct]||await i.loadProductionData(g.selectedProduct,g.selectedYear)}catch(t){}const e=()=>{p.value=Math.min(400,Math.max(300,.4*window.innerWidth))};e(),window.addEventListener("resize",e),_=e});let _=null;d(()=>{_&&window.removeEventListener("resize",_)}),u([()=>g.selectedProduct,()=>g.selectedYear],async([e,t])=>{if(e&&t)try{i.timeseriesData&&i.timeseriesData[e]||await i.loadProductionData(e,t)}catch(a){}});const S={dataStore:i,uiStore:g,selectedVisualization:h,dashboardLoading:m,containerWidth:p,visualizationOptions:[{value:"world-map",label:"Weltkarte",icon:"globe"},{value:"timeseries",label:"Zeitreihen",icon:"chart"},{value:"overview",label:"Übersicht",icon:"grid"}],getCountriesArray:f,selectedCountryData:v,countryRank:y,topCountries:b,feedUsage:k,globalStats:x,onCountryClick:e=>{var t;if(!e||"string"!=typeof e)return;const a=i.getProductionData(g.selectedProduct,g.selectedYear),r=null==(t=null==a?void 0:a.data)?void 0:t.find(t=>t.countryCode===e);r&&g.selectedCountry!==r.country&&g.setSelectedCountry(r.country)},get resizeHandler(){return _},set resizeHandler(e){_=e},WorldMap:r,TimeseriesChart:a,get formatAgricultureValue(){return L}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),[["render",function(e,t,a,r,s,n){var i,l,o,c,d,u,S,w;const M=k("router-link");return x(),g("div",V,[h("div",W,[h("div",j,[h("div",T,[h("div",I,[t[4]||(t[4]=h("div",{class:"flex-shrink-0"},[h("div",{class:"w-12 h-12 bg-primary-100 dark:bg-primary-900/20 rounded-lg flex items-center justify-center"},[h("svg",{class:"w-6 h-6 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),h("div",U,[h("h3",K,p("production"===r.uiStore.selectedMetric?"Gesamtproduktion":"import_quantity"===r.uiStore.selectedMetric?"Gesamtimport":"export_quantity"===r.uiStore.selectedMetric?"Gesamtexport":"domestic_supply_quantity"===r.uiStore.selectedMetric?"Inlandsversorgung":"food_supply_kcal"===r.uiStore.selectedMetric?"Kalorienversorgung":"feed"===r.uiStore.selectedMetric?"Tierfutterverbrauch":"Gesamt")+" "+p(r.uiStore.selectedYear||(new Date).getFullYear()),1),h("p",q,p(r.formatAgricultureValue((null==(i=r.globalStats)?void 0:i.total)||0,{unit:(null==(l=r.globalStats)?void 0:l.unit)||"1000 t",showUnit:!0})),1),h("p",N,p((null==(o=r.uiStore.selectedProduct)?void 0:o.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()))||"Alle Produkte"),1)])])])]),h("div",H,[h("div",Z,[h("div",$,[t[5]||(t[5]=h("div",{class:"flex-shrink-0"},[h("div",{class:"w-12 h-12 bg-secondary-100 dark:bg-secondary-900/20 rounded-lg flex items-center justify-center"},[h("svg",{class:"w-6 h-6 text-secondary-600 dark:text-secondary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),h("div",Y,[h("h3",J,p("production"===r.uiStore.selectedMetric?"Produzierende Länder":"import_quantity"===r.uiStore.selectedMetric?"Importierende Länder":"export_quantity"===r.uiStore.selectedMetric?"Exportierende Länder":"domestic_supply_quantity"===r.uiStore.selectedMetric?"Versorgte Länder":"food_supply_kcal"===r.uiStore.selectedMetric?"Länder mit Kaloriendaten":"feed"===r.uiStore.selectedMetric?"Länder mit Futterdaten":"Länder mit Daten"),1),h("p",Q,p((null==(c=r.globalStats)?void 0:c.countries)||0),1),h("p",X," mit "+p("production"===r.uiStore.selectedMetric?"Produktionsdaten":"import_quantity"===r.uiStore.selectedMetric?"Importdaten":"export_quantity"===r.uiStore.selectedMetric?"Exportdaten":"domestic_supply_quantity"===r.uiStore.selectedMetric?"Versorgungsdaten":"food_supply_kcal"===r.uiStore.selectedMetric?"Kalorienwerten":"feed"===r.uiStore.selectedMetric?"Futterdaten":"Daten"),1)])])])]),h("div",ee,[h("div",te,[h("div",ae,[t[6]||(t[6]=h("div",{class:"flex-shrink-0"},[h("div",{class:"w-12 h-12 bg-success-100 dark:bg-success-900/20 rounded-lg flex items-center justify-center"},[h("svg",{class:"w-6 h-6 text-success-600 dark:text-success-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})])])],-1)),h("div",re,[h("h3",se,p("production"===r.uiStore.selectedMetric?"Größter Produzent":"import_quantity"===r.uiStore.selectedMetric?"Größter Importeur":"export_quantity"===r.uiStore.selectedMetric?"Größter Exporteur":"domestic_supply_quantity"===r.uiStore.selectedMetric?"Größter Verbraucher":"food_supply_kcal"===r.uiStore.selectedMetric?"Höchste Kalorienversorgung":"feed"===r.uiStore.selectedMetric?"Größter Futterverbraucher":"Spitzenreiter"),1),h("p",ne,p(r.globalStats.topProducer||"N/A"),1),h("p",ie,p(r.uiStore.selectedYear),1)])])])]),h("div",le,[h("div",oe,[h("div",ce,[t[8]||(t[8]=h("div",{class:"flex-shrink-0"},[h("div",{class:"w-12 h-12 bg-warning-100 dark:bg-warning-900/20 rounded-lg flex items-center justify-center"},[h("svg",{class:"w-6 h-6 text-warning-600 dark:text-warning-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})])])],-1)),h("div",de,[t[7]||(t[7]=h("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Als Tierfutter ",-1)),h("p",ue,p(r.feedUsage.percentage>0?r.feedUsage.percentage+"%":0===r.feedUsage.percentage&&["Maize and products","Wheat and products","Barley and products","Sorghum and products","Cereals - Excluding Beer","Grand Total"].includes(r.uiStore.selectedProduct)?"0%":"N/A"),1),h("p",ge,p(r.feedUsage.amount>0?r.formatAgricultureValue(r.feedUsage.amount,{unit:r.feedUsage.unit,showUnit:!0}):0===r.feedUsage.percentage&&["Maize and products","Wheat and products","Barley and products","Sorghum and products","Cereals - Excluding Beer","Grand Total"].includes(r.uiStore.selectedProduct)?"Keine Futternutzung":"Nicht als Futter genutzt"),1)])])])])]),r.selectedCountryData?(x(),g("div",he,[h("div",me,[h("h3",pe,p(r.uiStore.selectedCountry)+" - Detailansicht ",1),h("button",{class:"btn btn-ghost btn-sm",onClick:t[0]||(t[0]=e=>r.uiStore.setSelectedCountry(""))},t[9]||(t[9]=[h("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),h("div",fe,[h("div",ve,[h("div",ye,[t[10]||(t[10]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Produktion",-1)),h("p",be,p(r.formatAgricultureValue(r.selectedCountryData.value,{unit:r.selectedCountryData.unit||"1000 t",showUnit:!0})),1)]),h("div",ke,[t[11]||(t[11]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Weltanteil",-1)),h("p",xe,p(r.globalStats.total>0&&r.selectedCountryData?(r.selectedCountryData.value/r.globalStats.total*100).toFixed(1):"0")+"% ",1),t[12]||(t[12]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," der Weltproduktion ",-1))]),h("div",_e,[t[13]||(t[13]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Rang",-1)),h("p",Se," #"+p(r.countryRank),1),t[14]||(t[14]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," weltweit ",-1))]),h("div",we,[t[15]||(t[15]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jahr",-1)),h("p",Me,p(r.uiStore.selectedYear),1),t[16]||(t[16]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Datenjahr ",-1))])])])])):m("",!0),h("div",Pe,[h("div",Ce,[t[17]||(t[17]=h("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"}," Hauptvisualisierung ",-1)),h("div",Ee,[(x(),g(f,null,v(r.visualizationOptions,e=>h("button",{key:e.value,class:_(["btn btn-sm transition-colors duration-200",r.selectedVisualization===e.value?"bg-primary-600 text-white border-primary-600 hover:bg-primary-700":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"]),onClick:t=>r.selectedVisualization=e.value},p(e.label),11,ze)),64))])]),h("div",De,["world-map"===r.selectedVisualization?(x(),g("div",Fe,[y(r.WorldMap,{"selected-product":r.uiStore.selectedProduct,"selected-year":r.uiStore.selectedYear,"selected-metric":r.uiStore.selectedMetric,onCountryClick:r.onCountryClick,onCountryHover:t[1]||(t[1]=e=>{})},null,8,["selected-product","selected-year","selected-metric"])])):"timeseries"===r.selectedVisualization?(x(),g("div",Oe,[y(r.TimeseriesChart,{"selected-country":r.uiStore.selectedCountry,"selected-product":r.uiStore.selectedProduct,"selected-metric":r.uiStore.selectedMetric,onPointHover:t[2]||(t[2]=e=>{}),onPointClick:t[3]||(t[3]=e=>{})},null,8,["selected-country","selected-product","selected-metric"])])):"overview"===r.selectedVisualization?(x(),g("div",Ae,[h("div",Ge,[h("div",Le,[t[18]||(t[18]=h("div",{class:"px-4 pt-4 pb-2 flex-shrink-0"},[h("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Weltweite Verteilung ")],-1)),h("div",Be,[y(r.WorldMap,{width:r.containerWidth,height:600,"selected-product":r.uiStore.selectedProduct,"selected-year":r.uiStore.selectedYear,"selected-metric":r.uiStore.selectedMetric,onCountryClick:r.onCountryClick},null,8,["width","selected-product","selected-year","selected-metric"])])]),h("div",Re,[t[19]||(t[19]=h("div",{class:"px-4 pt-4 pb-2 flex-shrink-0"},[h("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Zeitliche Entwicklung ")],-1)),h("div",Ve,[y(r.TimeseriesChart,{width:r.containerWidth,height:600,"selected-country":r.uiStore.selectedCountry,"selected-product":r.uiStore.selectedProduct,"selected-metric":r.uiStore.selectedMetric},null,8,["width","selected-country","selected-product","selected-metric"])])]),h("div",We,[t[20]||(t[20]=h("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," Top 10 Länder ",-1)),h("div",je,[(x(!0),g(f,null,v(r.topCountries,(e,t)=>(x(),g("div",{key:e.country,class:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded"},[h("div",Te,[h("span",Ie,p(t+1),1),h("span",Ue,p(e.country),1)]),h("span",Ke,p(r.formatAgricultureValue(e.value,{unit:e.unit||"1000 t",showUnit:!0})),1)]))),128))])]),h("div",qe,[t[25]||(t[25]=h("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," Schnellstatistiken ",-1)),h("div",Ne,[h("div",He,[t[21]||(t[21]=h("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Durchschnitt/Land:",-1)),h("span",Ze,p(r.globalStats.countries>0?r.formatAgricultureValue(Math.round(r.globalStats.total/r.globalStats.countries),{unit:r.globalStats.unit||"1000 t",showUnit:!0}):"0"),1)]),h("div",$e,[t[22]||(t[22]=h("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Datenjahre:",-1)),h("span",Ye,p((null==(d=r.dataStore.availableYears)?void 0:d.length)||0),1)]),h("div",Je,[t[23]||(t[23]=h("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Produkte:",-1)),h("span",Qe,p((null==(u=r.dataStore.availableProducts)?void 0:u.length)||0),1)]),h("div",Xe,[t[24]||(t[24]=h("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Gesamt Länder:",-1)),h("span",et,p((null==(w=null==(S=r.dataStore.geoData)?void 0:S.features)?void 0:w.length)||0),1)])])])])])):m("",!0)])]),h("div",tt,[t[30]||(t[30]=h("div",{class:"card-header"},[h("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"}," Schnellaktionen ")],-1)),h("div",at,[h("div",rt,[y(M,{to:"/timeseries",class:"block p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-center"},{default:b(()=>t[26]||(t[26]=[h("svg",{class:"w-8 h-8 text-primary-600 dark:text-primary-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})],-1),h("p",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Zeitreihen",-1)])),_:1,__:[26]}),y(M,{to:"/simulation",class:"block p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-center"},{default:b(()=>t[27]||(t[27]=[h("svg",{class:"w-8 h-8 text-secondary-600 dark:text-secondary-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})],-1),h("p",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Simulation",-1)])),_:1,__:[27]}),y(M,{to:"/ml-predictions",class:"block p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-center"},{default:b(()=>t[28]||(t[28]=[h("svg",{class:"w-8 h-8 text-success-600 dark:text-success-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1),h("p",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"ML Prognosen",-1)])),_:1,__:[28]}),y(M,{to:"/structural",class:"block p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-center"},{default:b(()=>t[29]||(t[29]=[h("svg",{class:"w-8 h-8 text-warning-600 dark:text-warning-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14-7v12a2 2 0 01-2 2H7a2 2 0 01-2-2V4a2 2 0 012-2h10a2 2 0 012 2zM9 11h6"})],-1),h("p",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Strukturanalyse",-1)])),_:1,__:[29]})])])])])}],["__file","DashboardPanel.vue"]]),nt=Object.freeze(Object.defineProperty({__proto__:null,default:st},Symbol.toStringTag,{value:"Module"})),it={"Animal fats":"Tierische Fette","Barley and products":"Gerste und Erzeugnisse",Beer:"Bier","Cereals - Excluding Beer":"Getreide - Ohne Bier","Cereals, other":"Getreide, andere","Maize and products":"Mais und Erzeugnisse","Millet and products":"Hirse und Erzeugnisse",Oats:"Hafer","Rice and products":"Reis und Erzeugnisse","Rye and products":"Roggen und Erzeugnisse","Sorghum and products":"Sorghum und Erzeugnisse","Wheat and products":"Weizen und Erzeugnisse","Apples and products":"Äpfel und Erzeugnisse",Bananas:"Bananen","Citrus, Other":"Zitrusfrüchte, andere",Dates:"Datteln","Fruits - Excluding Wine":"Früchte - Ohne Wein","Fruits, other":"Früchte, andere","Grapefruit and products":"Grapefruit und Erzeugnisse","Grapes and products (excl wine)":"Trauben und Erzeugnisse (ohne Wein)","Lemons, Limes and products":"Zitronen, Limetten und Erzeugnisse","Oranges, Mandarines":"Orangen, Mandarinen","Pineapples and products":"Ananas und Erzeugnisse","Cassava and products":"Maniok und Erzeugnisse",Onions:"Zwiebeln",Plantains:"Kochbananen","Potatoes and products":"Kartoffeln und Erzeugnisse","Roots, Other":"Wurzeln, andere","Starchy Roots":"Stärkehaltige Wurzeln","Sweet potatoes":"Süßkartoffeln","Tomatoes and products":"Tomaten und Erzeugnisse",Vegetables:"Gemüse","Vegetables, other":"Gemüse, andere",Yams:"Yams",Beans:"Bohnen",Groundnuts:"Erdnüsse","Nuts and products":"Nüsse und Erzeugnisse",Peas:"Erbsen",Pulses:"Hülsenfrüchte","Pulses, Other and products":"Hülsenfrüchte, andere und Erzeugnisse",Treenuts:"Baumnüsse","Bovine Meat":"Rindfleisch","Butter, Ghee":"Butter, Ghee",Cream:"Sahne",Eggs:"Eier",Meat:"Fleisch","Meat, Aquatic Mammals":"Fleisch von Wassersäugetieren","Meat, Other":"Fleisch, andere","Milk - Excluding Butter":"Milch - Ohne Butter","Mutton & Goat Meat":"Hammel- und Ziegenfleisch",Offals:"Innereien","Offals, Edible":"Innereien, essbar",Pigmeat:"Schweinefleisch","Poultry Meat":"Geflügelfleisch","Aquatic Animals, Others":"Wassertiere, andere","Aquatic Plants":"Wasserpflanzen","Aquatic Products, Other":"Wasserprodukte, andere",Cephalopods:"Kopffüßer",Crustaceans:"Krebstiere","Demersal Fish":"Bodenfische","Fish, Body Oil":"Fischkörperöl","Fish, Liver Oil":"Fischleberöl","Fish, Seafood":"Fisch, Meeresfrüchte","Freshwater Fish":"Süßwasserfische","Marine Fish, Other":"Meeresfische, andere","Molluscs, Other":"Weichtiere, andere","Pelagic Fish":"Pelagische Fische","Coconut Oil":"Kokosöl","Cottonseed Oil":"Baumwollsamenöl","Fats, Animals, Raw":"Tierische Fette, roh","Groundnut Oil":"Erdnussöl","Maize Germ Oil":"Maiskeimöl",Oilcrops:"Ölsaaten","Oilcrops Oil, Other":"Ölsaatenöl, andere","Oilcrops, Other":"Ölsaaten, andere","Olive Oil":"Olivenöl","Olives (including preserved)":"Oliven (einschließlich konservierte)","Palm Oil":"Palmöl","Palmkernel Oil":"Palmkernöl","Rape and Mustard Oil":"Raps- und Senföl","Ricebran Oil":"Reiskleieöl","Sesameseed Oil":"Sesamöl","Soyabean Oil":"Sojaöl","Sunflowerseed Oil":"Sonnenblumenöl","Vegetable Oils":"Pflanzenöle",Cloves:"Nelken","Cocoa Beans and products":"Kakaobohnen und Erzeugnisse","Coffee and products":"Kaffee und Erzeugnisse",Cottonseed:"Baumwollsamen","Palm kernels":"Palmkerne",Pepper:"Pfeffer",Pimento:"Piment","Rape and Mustardseed":"Raps- und Senfsamen","Sesame seed":"Sesamsamen",Soyabeans:"Sojabohnen",Spices:"Gewürze","Spices, Other":"Gewürze, andere",Stimulants:"Stimulanzien","Sunflower seed":"Sonnenblumenkerne","Tea (including mate)":"Tee (einschließlich Mate)","Beverages, Fermented":"Fermentierte Getränke",Honey:"Honig","Sugar & Sweeteners":"Zucker und Süßstoffe","Sugar (Raw Equivalent)":"Zucker (Rohzuckeräquivalent)","Sugar Crops":"Zuckerpflanzen","Sugar beet":"Zuckerrüben","Sugar cane":"Zuckerrohr","Sugar non-centrifugal":"Zucker, nicht zentrifugiert","Sweeteners, Other":"Süßstoffe, andere",Wine:"Wein","Coconuts - Incl Copra":"Kokosnüsse - Inkl. Kopra","Infant food":"Säuglingsnahrung",Miscellaneous:"Verschiedenes",animal_fats:"Tierische Fette",apples_and_products:"Äpfel und Erzeugnisse",aquatic_animals_others:"Wassertiere, andere",aquatic_plants:"Wasserpflanzen",aquatic_products_other:"Wasserprodukte, andere",bananas:"Bananen",barley_and_products:"Gerste und Erzeugnisse",beans:"Bohnen",beer:"Bier",beverages_fermented:"Fermentierte Getränke",bovine_meat:"Rindfleisch",butter_ghee:"Butter, Ghee",cassava_and_products:"Maniok und Erzeugnisse",cephalopods:"Kopffüßer",cereals___excluding_beer:"Getreide - Ohne Bier",cereals_other:"Getreide, andere",citrus_other:"Zitrusfrüchte, andere",cloves:"Nelken",cocoa_beans_and_products:"Kakaobohnen und Erzeugnisse",coconut_oil:"Kokosöl",coconuts___incl_copra:"Kokosnüsse - Inkl. Kopra",coffee_and_products:"Kaffee und Erzeugnisse",cottonseed:"Baumwollsamen",cottonseed_oil:"Baumwollsamenöl",cream:"Sahne",crustaceans:"Krebstiere",dates:"Datteln",demersal_fish:"Bodenfische",eggs:"Eier",fats_animals_raw:"Tierische Fette, roh",fish_body_oil:"Fischkörperöl",fish_liver_oil:"Fischleberöl",fish_seafood:"Fisch, Meeresfrüchte",freshwater_fish:"Süßwasserfische",fruits___excluding_wine:"Früchte - Ohne Wein",fruits_other:"Früchte, andere",grapefruit_and_products:"Grapefruit und Erzeugnisse",grapes_and_products_excl_wine:"Trauben und Erzeugnisse (ohne Wein)",groundnut_oil:"Erdnussöl",groundnuts:"Erdnüsse",honey:"Honig",lemons_limes_and_products:"Zitronen, Limetten und Erzeugnisse",maize_and_products:"Mais und Erzeugnisse",maize_germ_oil:"Maiskeimöl",marine_fish_other:"Meeresfische, andere",meat:"Fleisch",meat_other:"Fleisch, andere",milk___excluding_butter:"Milch - Ohne Butter",millet_and_products:"Hirse und Erzeugnisse",miscellaneous:"Verschiedenes",molluscs_other:"Weichtiere, andere","mutton_&_goat_meat":"Hammel- und Ziegenfleisch",nuts_and_products:"Nüsse und Erzeugnisse",oats:"Hafer",offals:"Innereien",offals_edible:"Innereien, essbar",oilcrops:"Ölsaaten",oilcrops_oil_other:"Ölsaatenöl, andere",oilcrops_other:"Ölsaaten, andere",olive_oil:"Olivenöl",olives_including_preserved:"Oliven (einschließlich konservierte)",onions:"Zwiebeln",oranges_mandarines:"Orangen, Mandarinen",palm_kernels:"Palmkerne",palm_oil:"Palmöl",palmkernel_oil:"Palmkernöl",peas:"Erbsen",pelagic_fish:"Pelagische Fische",pepper:"Pfeffer",pigmeat:"Schweinefleisch",pimento:"Piment",pineapples_and_products:"Ananas und Erzeugnisse",plantains:"Kochbananen",potatoes_and_products:"Kartoffeln und Erzeugnisse",poultry_meat:"Geflügelfleisch",pulses:"Hülsenfrüchte",pulses_other_and_products:"Hülsenfrüchte, andere und Erzeugnisse",rape_and_mustard_oil:"Raps- und Senföl",rape_and_mustardseed:"Raps- und Senfsamen",rice_and_products:"Reis und Erzeugnisse",ricebran_oil:"Reiskleieöl",roots_other:"Wurzeln, andere",rye_and_products:"Roggen und Erzeugnisse",sesame_seed:"Sesamsamen",sesameseed_oil:"Sesamöl",sorghum_and_products:"Sorghum und Erzeugnisse",soyabean_oil:"Sojaöl",soyabeans:"Sojabohnen",spices:"Gewürze",spices_other:"Gewürze, andere",starchy_roots:"Stärkehaltige Wurzeln",stimulants:"Stimulanzien","sugar_&_sweeteners":"Zucker und Süßstoffe",sugar_beet:"Zuckerrüben",sugar_cane:"Zuckerrohr",sugar_crops:"Zuckerpflanzen",sugar_non_centrifugal:"Zucker, nicht zentrifugiert",sugar_raw_equivalent:"Zucker (Rohzuckeräquivalent)",sunflower_seed:"Sonnenblumenkerne",sunflowerseed_oil:"Sonnenblumenöl",sweet_potatoes:"Süßkartoffeln",sweeteners_other:"Süßstoffe, andere",tea_including_mate:"Tee (einschließlich Mate)",tomatoes_and_products:"Tomaten und Erzeugnisse",treenuts:"Baumnüsse",vegetable_oils:"Pflanzenöle",vegetables:"Gemüse",vegetables_other:"Gemüse, andere",wheat_and_products:"Weizen und Erzeugnisse",wine:"Wein",yams:"Yams"},lt={cereals:{name:"Getreide und Körner",icon:"🌾",products:["Barley and products","Beer","Cereals - Excluding Beer","Cereals, other","Maize and products","Millet and products","Oats","Rice and products","Rye and products","Sorghum and products","Wheat and products"]},fruits:{name:"Früchte",icon:"🍎",products:["Apples and products","Bananas","Citrus, Other","Dates","Fruits - Excluding Wine","Fruits, other","Grapefruit and products","Grapes and products (excl wine)","Lemons, Limes and products","Oranges, Mandarines","Pineapples and products"]},vegetables:{name:"Gemüse und Wurzeln",icon:"🥕",products:["Cassava and products","Onions","Plantains","Potatoes and products","Roots, Other","Starchy Roots","Sweet potatoes","Tomatoes and products","Vegetables","Vegetables, other","Yams"]},legumes:{name:"Hülsenfrüchte und Nüsse",icon:"🥜",products:["Beans","Groundnuts","Nuts and products","Peas","Pulses","Pulses, Other and products","Treenuts"]},meat:{name:"Fleisch und Tierprodukte",icon:"🥩",products:["Bovine Meat","Butter, Ghee","Cream","Eggs","Meat","Meat, Aquatic Mammals","Meat, Other","Milk - Excluding Butter","Mutton & Goat Meat","Offals","Offals, Edible","Pigmeat","Poultry Meat"]},seafood:{name:"Fisch und Meeresfrüchte",icon:"🐟",products:["Aquatic Animals, Others","Aquatic Plants","Aquatic Products, Other","Cephalopods","Crustaceans","Demersal Fish","Fish, Body Oil","Fish, Liver Oil","Fish, Seafood","Freshwater Fish","Marine Fish, Other","Molluscs, Other","Pelagic Fish"]},oils:{name:"Öle und Fette",icon:"🫒",products:["Animal fats","Coconut Oil","Cottonseed Oil","Fats, Animals, Raw","Groundnut Oil","Maize Germ Oil","Oilcrops","Oilcrops Oil, Other","Oilcrops, Other","Olive Oil","Olives (including preserved)","Palm Oil","Palmkernel Oil","Rape and Mustard Oil","Ricebran Oil","Sesameseed Oil","Soyabean Oil","Sunflowerseed Oil","Vegetable Oils"]},seeds:{name:"Samen und Rohstoffe",icon:"🌱",products:["Cloves","Cocoa Beans and products","Coffee and products","Cottonseed","Palm kernels","Pepper","Pimento","Rape and Mustardseed","Sesame seed","Soyabeans","Spices","Spices, Other","Stimulants","Sunflower seed","Tea (including mate)"]},sugar:{name:"Zucker und Süßstoffe",icon:"🍯",products:["Beverages, Fermented","Honey","Sugar & Sweeteners","Sugar (Raw Equivalent)","Sugar Crops","Sugar beet","Sugar cane","Sugar non-centrifugal","Sweeteners, Other","Wine"]},other:{name:"Andere",icon:"📦",products:["Coconuts - Incl Copra","Infant food","Miscellaneous"]}},ot=e=>it[e]||e,ct=e=>{if(it[e])return it[e];const t=e.replace(/_/g," ");if(it[t])return it[t];const a=t.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ");return it[a]?it[a]:e.replace(/_/g," ").replace(/&/g,"&").replace(/___/g," - ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")},dt=e=>{for(const[t,a]of Object.entries(lt))if(a.products.includes(e))return t;return"other"},ut=()=>Object.keys(it).map(e=>{var t;return{value:e,label:ot(e),category:dt(e),categoryName:(null==(t=lt[dt(e)])?void 0:t.name)||"Andere"}}).sort((e,t)=>e.label.localeCompare(t.label,"de")),gt={class:"timeseries-panel"},ht={class:"panel-controls"},mt={class:"filters-grid"},pt={class:"filter-group"},ft={class:"filter-group"},vt={class:"filter-group","data-tour":"year-selector"},yt={class:"panel-content"},bt={key:0,class:"error-container"},kt={key:1,class:"chart-container","data-tour":"timeseries-chart"},xt={key:2,class:"empty-state"},_t={key:0},St={key:1},wt={key:0,class:"panel-footer"},Mt={class:"stats-grid"},Pt={class:"stat-item"},Ct={class:"stat-value"},Et={class:"stat-item"},zt={class:"stat-label"},Dt={class:"stat-value"},Ft={class:"stat-item"},Ot={class:"stat-label"},At={class:"stat-value"};const Gt=G({__name:"TimeseriesPanel",setup(r,{expose:s}){s();const n=e(),i=t(),d=l([]),g=l([]),h=l("production"),m=l([]),p=l(null),f=o(()=>null!==p.value),v=o(()=>{var e,t;const a=(null==(t=null==(e=n.faoMetadata)?void 0:e.data_summary)?void 0:t.food_items)||[];return a.length>0?a.map(e=>({value:e,label:ot(e)})).sort((e,t)=>e.label.localeCompare(t.label,"de")):ut()}),y=o(()=>{if(!n.timeseriesData||0===d.value.length)return[];const e=new Set;d.value.forEach(t=>{const a=n.timeseriesData[t];a&&Object.keys(a).forEach(t=>e.add(t))});const t=["World","Africa","Americas","Asia","Europe","Oceania","Northern America","South America","Central America","Caribbean","Northern Africa","Eastern Africa","Middle Africa","Southern Africa","Western Africa","Eastern Asia","South-eastern Asia","Southern Asia","Western Asia","Central Asia","Eastern Europe","Northern Europe","Southern Europe","Western Europe","Australia and New Zealand","Melanesia","European Union (27)","Small Island Developing States","Least Developed Countries","Land Locked Developing Countries","Low Income Food Deficit Countries","Net Food Importing Developing Countries"];return[...e].filter(e=>!t.includes(e)&&!e.toLowerCase().includes("total")).map(e=>({value:e,label:e})).sort((e,t)=>e.label.localeCompare(t.label))}),b=()=>{if(!n.timeseriesData||0===d.value.length)return void(m.value=[]);const e="production"===h.value?"production":"import_quantity"===h.value?"imports":"export_quantity"===h.value?"exports":"domestic_supply",t=[];d.value.forEach(a=>{const r=n.timeseriesData[a];if(r)if(g.value.length>0)g.value.forEach(s=>{if(r[s]){r[s].forEach(r=>{const n=r[e]||0;n>0&&t.push({year:r.year,value:n,country:s,product:a,unit:r.unit||"t",series:`${s} - ${a}`})})}});else{const s=new Map;Object.entries(r).forEach(([t,a])=>{a.forEach(t=>{const a=t[e]||0;if(a>0){const e=t.year,r=s.get(e)||0;s.set(e,r+a)}})}),s.forEach((e,r)=>{t.push({year:r,value:e,country:"Global",product:a,unit:"t",series:`Global - ${a}`})})}}),m.value=t.sort((e,t)=>e.series!==t.series?e.series.localeCompare(t.series):e.year-t.year)},k=async()=>{try{n.timeseriesData||await n.initializeApp()}catch(e){p.value=e}};u([d,g,h],()=>{b()},{immediate:!0}),c(async()=>{await k(),b()});const x={dataStore:n,uiStore:i,selectedProducts:d,selectedCountries:g,selectedMetric:h,chartData:m,error:p,hasError:f,productOptions:v,countryOptions:y,metricOptions:[{value:"production",label:"Produktion"},{value:"import_quantity",label:"Import"},{value:"export_quantity",label:"Export"},{value:"domestic_supply_quantity",label:"Inlandsversorgung"}],updateChartData:b,ensureDataLoaded:k,handleError:e=>{p.value=e},handlePointClick:e=>{},ref:l,computed:o,watch:u,onMounted:c,get useDataStore(){return e},get useUIStore(){return t},ErrorBoundary:z,ErrorDisplay:E,SearchableSelect:C,MultiSelect:P,TimeseriesChart:a,get getAllProductOptions(){return ut},get getGermanName(){return ot}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},[["render",function(e,t,a,r,s,n){return x(),g("div",gt,[y(r.ErrorBoundary,{onError:r.handleError},{default:b(()=>[t[6]||(t[6]=h("div",{class:"panel-header"},[h("h2",{class:"panel-title"},"Zeitreihen-Analyse"),h("p",{class:"panel-description"}," Zeitliche Entwicklung von Produktionsdaten und Trends ")],-1)),h("div",ht,[h("div",mt,[h("div",pt,[y(r.MultiSelect,{modelValue:r.selectedProducts,"onUpdate:modelValue":t[0]||(t[0]=e=>r.selectedProducts=e),options:r.productOptions,placeholder:"Produkte auswählen...",label:"Produkte",size:"md","max-items":3},null,8,["modelValue","options"])]),h("div",ft,[y(r.MultiSelect,{modelValue:r.selectedCountries,"onUpdate:modelValue":t[1]||(t[1]=e=>r.selectedCountries=e),options:r.countryOptions,placeholder:"Länder auswählen...",label:"Länder",size:"md","max-items":5},null,8,["modelValue","options"])]),h("div",vt,[y(r.SearchableSelect,{modelValue:r.selectedMetric,"onUpdate:modelValue":t[2]||(t[2]=e=>r.selectedMetric=e),options:r.metricOptions,placeholder:"Metrik auswählen...",label:"Metrik",size:"md"},null,8,["modelValue"])])])]),h("div",yt,[r.hasError?(x(),g("div",bt,[y(r.ErrorDisplay,{error:r.error,title:"Fehler beim Laden der Zeitreihendaten","show-retry":!0,onRetry:r.ensureDataLoaded},null,8,["error"])])):r.chartData.length>0?(x(),g("div",kt,[y(r.TimeseriesChart,{width:800,height:500,"selected-countries":r.selectedCountries,"selected-products":r.selectedProducts,"selected-metric":r.selectedMetric,"chart-data":r.chartData,onPointClick:r.handlePointClick},null,8,["selected-countries","selected-products","selected-metric","chart-data"])])):(x(),g("div",xt,[t[3]||(t[3]=h("div",{class:"empty-icon"},"📈",-1)),t[4]||(t[4]=h("h3",null,"Keine Daten verfügbar",-1)),0===r.selectedProducts.length?(x(),g("p",_t," Wählen Sie mindestens ein Produkt aus, um Zeitreihendaten anzuzeigen. ")):(x(),g("p",St," Die ausgewählten Produkte haben keine verfügbaren Zeitreihendaten. "))]))]),r.chartData.length>0?(x(),g("div",wt,[h("div",Mt,[h("div",Pt,[t[5]||(t[5]=h("span",{class:"stat-label"},"Datenpunkte",-1)),h("span",Ct,p(r.chartData.length),1)]),h("div",Et,[h("span",zt,p(r.selectedProducts.length>1?"Produkte":"Produkt"),1),h("span",Dt,p(r.selectedProducts.length),1)]),h("div",Ft,[h("span",Ot,p(r.selectedCountries.length>1?"Länder":"Land"),1),h("span",At,p(r.selectedCountries.length>0?r.selectedCountries.length:"Global"),1)])])])):m("",!0)]),_:1,__:[6]})])}],["__scopeId","data-v-ff094188"],["__file","TimeseriesPanel.vue"]]),Lt=Object.freeze(Object.defineProperty({__proto__:null,default:Gt},Symbol.toStringTag,{value:"Module"})),Bt={class:"simulation-panel"},Rt={class:"panel-content"},Vt={key:0,class:"error-container"},Wt={key:1,class:"loading-container"},jt={key:2,class:"simulation-content"},Tt={class:"scenario-section"},It={class:"scenario-grid"},Ut=["onClick"],Kt={class:"scenario-icon"},qt={class:"scenario-name"},Nt={class:"scenario-description"},Ht={class:"config-section"},Zt={class:"config-grid"},$t={class:"config-item"},Yt={class:"slider-header"},Jt={class:"slider-value"},Qt={class:"slider-description"},Xt={class:"config-item"},ea={class:"slider-header"},ta={class:"slider-value"},aa={class:"slider-description"},ra={class:"config-item"},sa={class:"slider-header"},na={class:"slider-value"},ia={class:"slider-description"},la={class:"config-item"},oa={class:"slider-header"},ca={class:"slider-value"},da={class:"slider-description"},ua={class:"config-actions"},ga={class:"action-buttons"},ha={key:0,class:"config-changed-indicator"},ma={key:0,class:"results-section"},pa={class:"results-header"},fa={class:"results-meta"},va={class:"meta-item"},ya={class:"meta-item"},ba={key:0,class:"meta-item"},ka={class:"results-grid"},xa={class:"result-card"},_a={class:"result-description"},Sa={class:"result-card"},wa={class:"result-description"},Ma={class:"result-card"},Pa={class:"result-description"},Ca={class:"result-card"},Ea={class:"result-description"},za={class:"chart-container","data-tour":"simulation-chart"},Da={key:1,class:"empty-state"};const Fa=G({__name:"SimulationPanel",setup(e,{expose:t}){t();const{handleError:a,wrapAsync:r}=A(),n=l(!1),i=l(null),d=l(null),g=l("climate_shock"),h=l(!1),m=l(null),p=l({climateChange:1,populationGrowth:1.2,techProgress:1.1,economicGrowth:1.5}),f=o(()=>null!==i.value),v=o(()=>[{id:"climate_shock",name:"Klimaschock",description:"Extreme Wetterereignisse und Klimawandel",icon:"🌡️",sliderPreset:{climateChange:1.4,populationGrowth:1.1,techProgress:.9,economicGrowth:.8}},{id:"population_pressure",name:"Bevölkerungsdruck",description:"Schnelles Bevölkerungswachstum vs. Produktionskapazität",icon:"👥",sliderPreset:{climateChange:1.1,populationGrowth:1.8,techProgress:1.1,economicGrowth:1.3}},{id:"tech_revolution",name:"Technologie-Revolution",description:"Precision Farming und Biotechnologie",icon:"🔬",sliderPreset:{climateChange:.9,populationGrowth:1.2,techProgress:1.8,economicGrowth:1.6}},{id:"trade_disruption",name:"Handelsdisruption",description:"Geopolitische Spannungen und Handelskriege",icon:"📈",sliderPreset:{climateChange:1.2,populationGrowth:1.1,techProgress:1,economicGrowth:.7}},{id:"custom",name:"Benutzerdefiniert",description:"Eigene Parameter-Kombination",icon:"⚙️",sliderPreset:{climateChange:1,populationGrowth:1,techProgress:1,economicGrowth:1}}]),y=o(()=>({width:800,height:400,margin:{top:20,right:30,bottom:40,left:80},showConfidenceInterval:!0,showScenarios:!0,interactive:!0,animated:!0})),b=(e,t,a,r,s=1)=>{const n=[e];let i=e;for(let l=1;l<=r;l++){const r=s;i*=1+(t+.1*(e-i)/e)*r+a*(2*(Math.random()-.5))*Math.sqrt(r),n.push(Math.max(0,i))}return n},k=(e,t=500)=>{const a=[],r=-.03*(e.climateChange-1)+.02*(e.populationGrowth-1)+.04*(e.techProgress-1)+.015*(e.economicGrowth-1),s=.1+.08*Math.abs(e.climateChange-1)+.05*Math.abs(e.economicGrowth-1);for(let n=0;n<t;n++){const e=b(1e6,r,s,10);a.push(e)}return a},x=(e,t=.9)=>{const a=e[0].length,r=[];for(let s=0;s<a;s++){const a=e.map(e=>e[s]).sort((e,t)=>e-t),n=Math.floor((1-t)/2*a.length),i=Math.floor((1+t)/2*a.length);r.push({mean:a.reduce((e,t)=>e+t,0)/a.length,lower:a[n],upper:a[i],median:a[Math.floor(a.length/2)]})}return r},_=r(async()=>{i.value=null,n.value=!0;try{const e=v.value.find(e=>e.id===g.value),t=e?e.name:"Benutzerdefiniert";await new Promise(e=>setTimeout(e,1500));const a=p.value,r=k(a),s=x(r),n=k({climateChange:1,populationGrowth:1,techProgress:1,economicGrowth:1},100),i=x(n).map(e=>e.mean),l=s[s.length-1].mean,o=i[i.length-1],c=(l-o)/o*100,u=Math.max(15,Math.min(100,65+.3*c-20*Math.abs(a.climateChange-1)+15*(a.techProgress-1))),f=30*(a.climateChange-1)+12*(a.populationGrowth-1)+-15*(a.techProgress-1)+8*(a.economicGrowth-1)+(c>0?.1*c:0),y=.8*c+40*(a.techProgress-1)+50*(a.economicGrowth-1)-.2*Math.abs(f),b=(new Date).getFullYear(),_=s.map((e,t)=>({year:b+t,baseline:i[t],scenario:e.mean,lower:e.lower,upper:e.upper}));d.value={productionChange:Math.round(10*c)/10,foodSecurity:Math.round(u),environmentImpact:Math.round(10*f)/10,economicImpact:Math.round(10*y)/10,timeSeriesData:_,config:{...a},scenario:t,dataSource:`Monte Carlo Simulation (${r.length} Pfade)`,simulationDetails:{totalPaths:r.length,confidenceLevel:"90%",timeHorizon:"10 Jahre",method:"Geometrische Brownsche Bewegung"}},m.value={...a},h.value=!1}catch(e){i.value=e}finally{n.value=!1}},{component:"SimulationPanel",operation:"runSimulation"});u(p,e=>{if(m.value){const t=Object.keys(e).some(t=>Math.abs(e[t]-m.value[t])>.05);h.value=t,t&&(d.value=null)}},{deep:!0}),c(async()=>{v.value.length>0&&S(v.value[0].id)});const S=e=>{g.value=e;const t=v.value.find(t=>t.id===e);t&&t.sliderPreset&&(p.value={...t.sliderPreset},m.value={...t.sliderPreset},d.value=null,h.value=!1)},w={handleErrorUtil:a,wrapAsync:r,isLoading:n,error:i,simulationResults:d,selectedScenario:g,hasConfigChanged:h,lastAppliedConfig:m,scenarioConfig:p,hasError:f,availableScenarios:v,chartConfig:y,calculateStochasticPath:b,runMonteCarloSimulation:k,calculateConfidenceIntervals:x,runSimulation:_,resetConfig:()=>{const e={climateChange:1,populationGrowth:1,techProgress:1,economicGrowth:1};p.value={...e},m.value={...e},d.value=null,h.value=!1,g.value="custom"},handleError:e=>{i.value=e,a(e,{component:"SimulationPanel",action:"component_error"})},handleScenarioSelect:S,formatChange:e=>e>0?`+${e.toFixed(1)}`:e.toFixed(1),getChangeClass:e=>e>0?"text-green-600 dark:text-green-400":e<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400",getFoodSecurityClass:e=>e>=80?"text-green-600 dark:text-green-400":e>=60?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",getEnvironmentClass:e=>e<=0?"text-green-600 dark:text-green-400":e<=10?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",getProductionDescription:e=>e>10?"Starke Produktionssteigerung erwartet":e>0?"Moderate Produktionssteigerung":e>-10?"Leichter Produktionsrückgang":"Erheblicher Produktionsrückgang",getFoodSecurityDescription:e=>e>=80?"Hohe Ernährungssicherheit":e>=60?"Mittlere Ernährungssicherheit":e>=40?"Niedrige Ernährungssicherheit":"Kritische Ernährungslage",getEnvironmentDescription:e=>e<=0?"Positive Umweltauswirkungen":e<=5?"Geringe Umweltbelastung":e<=15?"Mäßige Umweltbelastung":"Hohe Umweltbelastung",getEconomicDescription:e=>e>20?"Starke wirtschaftliche Vorteile":e>0?"Positive wirtschaftliche Effekte":e>-10?"Geringe wirtschaftliche Verluste":"Erhebliche wirtschaftliche Einbußen",getSliderDescription:(e,t)=>{switch(e){case"climate":return t<.9?"Milde Klimabedingungen":t>1.3?"Extreme Klimaereignisse":"Normale Klimabedingungen";case"population":return t<.9?"Schrumpfende Bevölkerung":t>1.5?"Schnelles Bevölkerungswachstum":"Stabiles Bevölkerungswachstum";case"tech":return t<.9?"Stagnierende Technologie":t>1.5?"Durchbruch-Innovationen":"Stetiger Technologiefortschritt";case"economic":return t<.8?"Wirtschaftskrise":t>1.4?"Wirtschaftsboom":"Stabile Wirtschaftslage";default:return""}},ref:l,computed:o,watch:u,onMounted:c,get useErrorHandling(){return A},ErrorBoundary:z,ErrorDisplay:E,LoadingSpinner:O,BaseButton:F,RangeSlider:D,SimulationChart:s};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}},[["render",function(e,t,a,r,s,n){return x(),g("div",Bt,[y(r.ErrorBoundary,{onError:r.handleError},{default:b(()=>[t[21]||(t[21]=h("div",{class:"panel-header"},[h("h2",{class:"panel-title"},"Simulationsmodelle"),h("p",{class:"panel-description"}," Interaktive Monte-Carlo-Simulationen für landwirtschaftliche Szenarien "),h("div",{class:"simulation-info"},[h("div",{class:"info-section"},[h("h3",{class:"info-title"},"Was wird berechnet?"),h("p",{class:"info-text"},[S(" Diese Simulation verwendet "),h("strong",null,"Monte-Carlo-Verfahren"),S(" mit 500 stochastischen Pfaden, um die Auswirkungen verschiedener Faktoren auf die globale Nahrungsmittelproduktion zu modellieren. Basierend auf "),h("strong",null,"Geometrischer Brownscher Bewegung"),S(" werden realistische Produktionstrends und Volatilitäten berechnet. ")])]),h("div",{class:"info-section"},[h("h3",{class:"info-title"},"Wie funktioniert es?"),h("div",{class:"info-steps"},[h("div",{class:"step"},[h("span",{class:"step-number"},"1"),h("span",{class:"step-text"},[h("strong",null,"Szenario wählen:"),S(" Klicken Sie auf ein vordefiniertes Szenario, um die Parameter automatisch zu setzen")])]),h("div",{class:"step"},[h("span",{class:"step-number"},"2"),h("span",{class:"step-text"},[h("strong",null,"Parameter anpassen:"),S(" Nutzen Sie die Slider, um Faktoren wie Klimawandel, Bevölkerungswachstum, Technologiefortschritt und wirtschaftliche Stabilität zu justieren")])]),h("div",{class:"step"},[h("span",{class:"step-number"},"3"),h("span",{class:"step-text"},[h("strong",null,"Simulation starten:"),S(" Die Berechnung erfolgt in Echtzeit und zeigt Auswirkungen auf Produktion, Ernährungssicherheit, Umwelt und Wirtschaft")])])])]),h("div",{class:"info-section"},[h("h3",{class:"info-title"},"Berechnungsgrundlage"),h("p",{class:"info-text"},[S(" Jeder Faktor beeinflusst die Simulation mathematisch: "),h("strong",null,"Klimawandel"),S(" reduziert Erträge, "),h("strong",null,"Bevölkerungswachstum"),S(" erhöht die Nachfrage, "),h("strong",null,"Technologie"),S(" steigert die Effizienz und "),h("strong",null,"wirtschaftliche Instabilität"),S(" erhöht die Volatilität. Die Ergebnisse zeigen 10-Jahres-Projektionen mit Konfidenzintervallen. ")])])])],-1)),h("div",Rt,[r.hasError?(x(),g("div",Vt,[y(r.ErrorDisplay,{error:r.error,title:"Fehler in der Simulation","show-retry":!0,onRetry:r.runSimulation},null,8,["error","onRetry"])])):r.isLoading?(x(),g("div",Wt,[y(r.LoadingSpinner,{size:"lg"}),t[4]||(t[4]=h("p",{class:"loading-text"},"Simulation läuft...",-1))])):(x(),g("div",jt,[h("div",Tt,[t[5]||(t[5]=h("h3",{class:"section-title"},"Szenario auswählen",-1)),h("div",It,[(x(!0),g(f,null,v(r.availableScenarios,e=>(x(),g("div",{key:e.id,class:_(["scenario-card",{"scenario-active":r.selectedScenario===e.id}]),onClick:t=>r.handleScenarioSelect(e.id)},[h("div",Kt,p(e.icon),1),h("h4",qt,p(e.name),1),h("p",Nt,p(e.description),1)],10,Ut))),128))])]),h("div",Ht,[t[11]||(t[11]=h("h3",{class:"section-title"},"Parameter-Konfiguration",-1)),h("div",Zt,[h("div",$t,[h("div",Yt,[t[6]||(t[6]=h("label",null,"Klimawandel-Intensität",-1)),h("span",Jt,p(r.scenarioConfig.climateChange.toFixed(1)),1)]),h("div",Qt,p(r.getSliderDescription("climate",r.scenarioConfig.climateChange)),1),y(r.RangeSlider,{modelValue:r.scenarioConfig.climateChange,"onUpdate:modelValue":t[0]||(t[0]=e=>r.scenarioConfig.climateChange=e),min:.5,max:1.5,step:.1},null,8,["modelValue"])]),h("div",Xt,[h("div",ea,[t[7]||(t[7]=h("label",null,"Bevölkerungswachstum",-1)),h("span",ta,p(r.scenarioConfig.populationGrowth.toFixed(1)),1)]),h("div",aa,p(r.getSliderDescription("population",r.scenarioConfig.populationGrowth)),1),y(r.RangeSlider,{modelValue:r.scenarioConfig.populationGrowth,"onUpdate:modelValue":t[1]||(t[1]=e=>r.scenarioConfig.populationGrowth=e),min:.5,max:2,step:.1},null,8,["modelValue"])]),h("div",ra,[h("div",sa,[t[8]||(t[8]=h("label",null,"Technologiefortschritt",-1)),h("span",na,p(r.scenarioConfig.techProgress.toFixed(1)),1)]),h("div",ia,p(r.getSliderDescription("tech",r.scenarioConfig.techProgress)),1),y(r.RangeSlider,{modelValue:r.scenarioConfig.techProgress,"onUpdate:modelValue":t[2]||(t[2]=e=>r.scenarioConfig.techProgress=e),min:.5,max:2,step:.1},null,8,["modelValue"])]),h("div",la,[h("div",oa,[t[9]||(t[9]=h("label",null,"Wirtschaftliche Stabilität",-1)),h("span",ca,p(r.scenarioConfig.economicGrowth.toFixed(1)),1)]),h("div",da,p(r.getSliderDescription("economic",r.scenarioConfig.economicGrowth)),1),y(r.RangeSlider,{modelValue:r.scenarioConfig.economicGrowth,"onUpdate:modelValue":t[3]||(t[3]=e=>r.scenarioConfig.economicGrowth=e),min:.5,max:1.8,step:.1},null,8,["modelValue"])])]),h("div",ua,[h("div",ga,[y(r.BaseButton,{disabled:r.isLoading,variant:"primary",onClick:r.runSimulation},{default:b(()=>[r.isLoading?(x(),w(r.LoadingSpinner,{key:0,size:"sm"})):m("",!0),S(" "+p(r.isLoading?"Simuliert...":"Simulation starten"),1)]),_:1},8,["disabled","onClick"]),y(r.BaseButton,{variant:"outline",onClick:r.resetConfig},{default:b(()=>t[10]||(t[10]=[S(" Zurücksetzen ")])),_:1,__:[10]})]),r.hasConfigChanged?(x(),g("div",ha," ⚠️ Parameter geändert - Simulation neu starten ")):m("",!0)])]),r.simulationResults?(x(),g("div",ma,[h("div",pa,[t[15]||(t[15]=h("h3",{class:"section-title"},"Simulationsergebnisse",-1)),h("div",fa,[h("span",va,[t[12]||(t[12]=h("strong",null,"Szenario:",-1)),S(" "+p(r.simulationResults.scenario),1)]),h("span",ya,[t[13]||(t[13]=h("strong",null,"Methode:",-1)),S(" "+p(r.simulationResults.dataSource),1)]),r.simulationResults.simulationDetails?(x(),g("span",ba,[t[14]||(t[14]=h("strong",null,"Details:",-1)),S(" "+p(r.simulationResults.simulationDetails.totalPaths)+" Pfade, "+p(r.simulationResults.simulationDetails.confidenceLevel)+" Konfidenz, "+p(r.simulationResults.simulationDetails.timeHorizon),1)])):m("",!0)])]),h("div",ka,[h("div",xa,[t[16]||(t[16]=h("div",{class:"result-header"},[h("h4",null,"Produktionsänderung"),h("span",{class:"result-icon"},"🌾")],-1)),h("div",{class:_(["result-value",r.getChangeClass(r.simulationResults.productionChange)])},p(r.formatChange(r.simulationResults.productionChange))+"% ",3),h("p",_a,p(r.getProductionDescription(r.simulationResults.productionChange)),1)]),h("div",Sa,[t[17]||(t[17]=h("div",{class:"result-header"},[h("h4",null,"Ernährungssicherheit"),h("span",{class:"result-icon"},"🍽️")],-1)),h("div",{class:_(["result-value",r.getFoodSecurityClass(r.simulationResults.foodSecurity)])},p(r.simulationResults.foodSecurity)+"% ",3),h("p",wa,p(r.getFoodSecurityDescription(r.simulationResults.foodSecurity)),1)]),h("div",Ma,[t[18]||(t[18]=h("div",{class:"result-header"},[h("h4",null,"Umweltauswirkung"),h("span",{class:"result-icon"},"🌍")],-1)),h("div",{class:_(["result-value",r.getEnvironmentClass(r.simulationResults.environmentImpact)])},p(r.formatChange(r.simulationResults.environmentImpact))+"% ",3),h("p",Pa,p(r.getEnvironmentDescription(r.simulationResults.environmentImpact)),1)]),h("div",Ca,[t[19]||(t[19]=h("div",{class:"result-header"},[h("h4",null,"Wirtschaftlicher Effekt"),h("span",{class:"result-icon"},"💰")],-1)),h("div",{class:_(["result-value",r.getChangeClass(r.simulationResults.economicImpact)])},p(r.formatChange(r.simulationResults.economicImpact))+"% ",3),h("p",Ea,p(r.getEconomicDescription(r.simulationResults.economicImpact)),1)])]),h("div",za,[y(r.SimulationChart,{data:r.simulationResults.timeSeriesData,config:r.chartConfig,onScenarioSelect:r.handleScenarioSelect},null,8,["data","config"])])])):m("",!0),r.simulationResults||r.isLoading?m("",!0):(x(),g("div",Da,t[20]||(t[20]=[h("div",{class:"empty-icon"},"⚙️",-1),h("h3",null,"Simulation bereit",-1),h("p",null,"Konfigurieren Sie die Parameter und starten Sie eine Simulation.",-1)])))]))])]),_:1,__:[21]})])}],["__scopeId","data-v-2890efca"],["__file","SimulationPanel.vue"]]),Oa=Object.freeze(Object.defineProperty({__proto__:null,default:Fa},Symbol.toStringTag,{value:"Module"})),Aa={class:"ml-panel"},Ga={class:"panel-controls"},La={class:"filters-grid"},Ba={class:"filter-group"},Ra={class:"filter-group"},Va={class:"filter-group"},Wa={class:"filter-group"},ja={class:"panel-content"},Ta={key:0,class:"error-container"},Ia={key:1,class:"loading-container"},Ua={key:2,class:"predictions-content"},Ka={key:0,class:"forecast-info"},qa={class:"info-title"},Na={class:"info-grid"},Ha={class:"info-item"},Za={class:"info-value"},$a={class:"info-item"},Ya={class:"info-value"},Ja={class:"model-stats"},Qa={key:0,class:"model-warning"},Xa={key:1,class:"ensemble-info"},er={class:"stats-grid"},tr={class:"stat-card"},ar={key:0,class:"stat-help text-xs text-gray-500 mt-1"},rr={class:"stat-card"},sr={class:"stat-value"},nr={key:0,class:"stat-help text-xs text-gray-500 mt-1"},ir={class:"stat-card"},lr={class:"stat-value"},or={key:0,class:"stat-help text-xs text-gray-500 mt-1"},cr={class:"stat-card"},dr={class:"stat-label"},ur={class:"stat-value text-green-600"},gr={key:0,class:"stat-help text-xs text-gray-500 mt-1"},hr={class:"chart-container","data-tour":"ml-chart"},mr={key:1,class:"insights-section"},pr={class:"insights-grid"},fr={class:"insight-card"},vr={class:"insight-content"},yr={class:"insight-card"},br={class:"insight-content"},kr={class:"insight-card"},xr={class:"insight-content"},_r={class:"insight-card"},Sr={class:"insight-content"},wr={class:"predictions-table"},Mr={class:"table-container"},Pr={class:"predictions-table-element"},Cr={class:"reliability-bar"},Er={class:"reliability-text"},zr={key:3,class:"empty-state"};const Dr=G({__name:"MLPanel",setup(t,{expose:a}){a();const r=e(),{handleError:s,wrapAsync:i}=A(),d=l("global"),g=l(""),h=l("linear"),m=l([]),p=l({}),f=l(!1),v=l(null),y=l(null),b=l([]),k=o(()=>null!==v.value),x=o(()=>[{value:"global",label:"Globale Prognosen"},{value:"regional",label:"Regionale Prognosen"},{value:"country",label:"Länder-spezifische Prognosen"}]),_=o(()=>b.value.map(e=>{const t=e.file.replace(".json","");let a=e.title||e.scenario||e.file;if("string"==typeof a){const e=t.replace(/_forecast$/,"");let r="",s="";if(e.startsWith("global_"))r=e.replace("global_",""),s="Globale";else if(e.startsWith("world_"))r=e.replace("world_",""),s="Welt";else{const t=e.split("_");for(let e=t.length-1;e>=1;e--){const a=t.slice(e).join("_");if(it[a]||a.includes("and")||a.includes("&")){r=a,s=t.slice(0,e).join("_").replace(/_/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");break}}!r&&t.length>1&&(r=t[t.length-1],s=t.slice(0,-1).join("_").replace(/_/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "))}if(r){a=`${s} ${ct(r)} Prognose`}}return{value:t,label:a}})),S=o(()=>[{value:"linear",label:"Lineare Regression"},{value:"polynomial",label:"Polynomiale Regression"},{value:"ensemble",label:"Ensemble (Linear + Polynomial)"}]),w=o(()=>({width:"100%",height:500,margin:{top:20,right:30,bottom:40,left:80},showConfidenceInterval:!0,showHistorical:!0,showTrend:!0,interactive:!0,animated:!0})),M=i(async()=>{var e,t;v.value=null,f.value=!0;try{const a=await r.loadMLForecast(g.value);if(a){if(y.value=a,a.model_performance){null==(e=a.model_performance.linear)||e.r2_score,null==(t=a.model_performance.polynomial)||t.r2_score}let r=[];"ensemble"===h.value&&a.ensemble_forecasts?r=a.ensemble_forecasts:a.forecasts&&a.forecasts[h.value]&&(r=a.forecasts[h.value]);const s=a.historical_data||[],n=s.length>0?s[s.length-1].year:(new Date).getFullYear()-1;if(m.value=r.map(e=>{const t="ensemble"===h.value,a=t?e.ensemble_mean:e.value;return{year:e.year,predicted_value:a,confidence_lower:t?e.model_min:e.confidence_lower,confidence_upper:t?e.model_max:e.confidence_upper,trend:P(e,n),reliability:t?100*e.model_agreement:100-e.uncertainty_percent,uncertainty_level:e.uncertainty_level||D(e.uncertainty_percent),model:h.value}}),a.model_performance&&a.model_performance[h.value]){const e=a.model_performance[h.value];p.value={accuracy:(100*(e.r2_score||0)).toFixed(1),rmse:Math.sqrt(e.mse||0).toFixed(0),mae:(e.mae||0).toFixed(0),r2:(e.r2_score||0).toFixed(3)}}else if("ensemble"===h.value&&a.model_performance){const e=Object.values(a.model_performance);if(e.length>0){const t=e.reduce((e,t)=>e+(t.r2_score||0),0)/e.length,a=e.reduce((e,t)=>e+(t.mse||0),0)/e.length,r=e.reduce((e,t)=>e+(t.mae||0),0)/e.length;p.value={accuracy:(100*t).toFixed(1),rmse:Math.sqrt(a).toFixed(0),mae:r.toFixed(0),r2:t.toFixed(3)}}else{const e=m.value.reduce((e,t)=>e+(t.reliability||0),0)/m.value.length;p.value={accuracy:e.toFixed(1),rmse:"Ensemble",mae:"Kombination",r2:"Gemittelt"}}}else p.value={accuracy:"N/A",rmse:"N/A",mae:"N/A",r2:"N/A"}}}catch(a){v.value=a,m.value=[],p.value={}}finally{f.value=!1}},{component:"MLPanel",operation:"loadPredictions"}),P=(e,t)=>e.years_ahead&&0!==e.years_ahead?10*((e.value||e.ensemble_mean||0)/1e5-1):0,D=e=>e<30?"low":e<60?"medium":"high",G=o(()=>{var e;if(!y.value)return[];return[...(null==(e=y.value.historical_data)?void 0:e.map(e=>({year:e.year,value:e.value,predicted_value:e.value,type:"historical"})).filter(e=>null!=e.value&&e.value>0))||[],...m.value.filter(e=>null!=e.predicted_value&&e.predicted_value>0).map(e=>({...e,value:e.predicted_value,type:"prediction"}))]});u([g,h],()=>{g.value&&h.value&&M()},{deep:!0});const B=i(async()=>{try{let e;switch(d.value){case"global":e=await r.loadMLGlobalIndex();break;case"regional":e=await r.loadMLRegionalIndex();break;case"country":e=await r.loadMLCountryIndex()}if(e&&(e.forecasts||e.files)){const t=e.forecasts||e.files;Array.isArray(t)&&"string"==typeof t[0]?b.value=t.map(e=>({file:e,title:e.replace(".json","").replace(/_/g," ").replace(/global /i,"").replace(/forecast/i,"").trim().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")})):b.value=t,b.value.length>0&&!g.value&&(g.value=b.value[0].file.replace(".json",""))}else b.value=[]}catch(e){b.value=[]}},{component:"MLPanel",operation:"loadAvailableForecasts"});c(async()=>{try{await r.loadMLComprehensiveIndex()}catch(e){}await B(),g.value&&await M()});const R={dataStore:r,handleErrorUtil:s,wrapAsync:i,selectedForecastType:d,selectedForecast:g,selectedModel:h,predictions:m,modelStats:p,isLoading:f,error:v,forecastData:y,availableForecasts:b,hasError:k,forecastTypeOptions:x,forecastOptions:_,modelOptions:S,chartConfig:w,loadPredictions:M,calculateTrend:P,getUncertaintyLevel:D,handleError:e=>{v.value=e,s(e,{component:"MLPanel",action:"component_error"})},handlePredictionSelect:e=>{},handleConfidenceToggle:e=>{},getFormattedForecastTitle:()=>{if(!y.value||!g.value)return"Produktionsprognose";const e=g.value.match(/(?:global_|world_|[a-z_]+_)?([a-z_&]+)(?:_forecast)?$/i);if(e){const t=e[1],a=ct(t);if(g.value.startsWith("global_"))return`Globale ${a} Produktionsprognose`;if(g.value.startsWith("world_"))return`Welt ${a} Produktionsprognose`;return`${g.value.replace(`_${t}_forecast`,"").replace(`_${t}`,"").replace(/_/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")} ${a} Produktionsprognose`}return y.value.title||"Produktionsprognose"},formatValue:e=>L(e,{unit:"1000 t",showUnit:!1}),formatTrend:e=>`${e>0?"+":""}${e.toFixed(1)}%`,getTrendClass:e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600",getReliabilityClass:e=>e>=90?"bg-green-500":e>=75?"bg-yellow-500":"bg-red-500",getModelLabel:e=>({linear:"Lineare Regression",polynomial:"Polynomiale Regression",ensemble:"Ensemble-Modell"}[e]||e),getStatsExplanation:e=>"ensemble"===e?{r2:"Durchschnittlicher R² Score der Einzelmodelle",rmse:"Durchschnittliche Wurzel der mittleren Quadratfehler",mae:"Durchschnittlicher mittlerer absoluter Fehler",accuracy:"Durchschnittliche Modellübereinstimmung (%)"}:{r2:"Bestimmtheitsmaß (R²) - Erklärt Varianz",rmse:"Wurzel der mittleren Quadratfehler",mae:"Mittlerer absoluter Fehler",accuracy:"Modellgenauigkeit basierend auf R²"},getR2Class:e=>{const t=parseFloat(e);return isNaN(t)?"":t<0?"text-red-800 font-bold":t>=.8?"text-green-600":t>=.6?"text-yellow-600":t>=.3?"text-orange-600":"text-red-600"},getGrowthInsight:()=>{if(!m.value.length||!y.value)return"Keine Daten verfügbar";const e=m.value[0].predicted_value,t=((m.value[m.value.length-1].predicted_value-e)/e*100).toFixed(1);return t>0?`Die Produktion wird voraussichtlich um ${t}% bis 2035 steigen.`:`Die Produktion wird voraussichtlich um ${Math.abs(t)}% bis 2035 sinken.`},getAccuracyInsight:()=>{if(!p.value.r2)return"Keine Genauigkeitsdaten verfügbar";const e=parseFloat(p.value.r2);return e<0?`WARNUNG: Das ${"linear"===h.value?"lineare":"polynomiale"} Modell ist ungeeignet für diese Daten (R² = ${e.toFixed(3)}). Die Vorhersagen sind sehr unzuverlässig. Versuchen Sie ein anderes Modell.`:e>=.8?"Das Modell zeigt eine sehr hohe Prognosegenauigkeit mit starker Korrelation zu historischen Daten.":e>=.6?"Das Modell zeigt eine gute Prognosegenauigkeit mit moderater Korrelation zu historischen Daten.":e>=.3?"Das Modell zeigt moderate Genauigkeit. Die Prognosen sollten als grobe Schätzungen betrachtet werden.":"Das Modell zeigt begrenzte Genauigkeit. Die Prognosen sollten mit großer Vorsicht interpretiert werden."},getUncertaintyInsight:()=>{if(!m.value.length)return"Keine Unsicherheitsdaten verfügbar";const e=m.value.filter(e=>e.uncertainty_level).reduce((e,t)=>e+("low"===t.uncertainty_level?1:"medium"===t.uncertainty_level?2:3),0)/m.value.length;return e<1.5?"Die Prognosen haben eine niedrige Unsicherheit und sind relativ zuverlässig.":e<2.5?"Die Prognosen haben eine moderate Unsicherheit. Langfristige Vorhersagen sollten regelmäßig aktualisiert werden.":"Die Prognosen haben eine hohe Unsicherheit, besonders für spätere Jahre. Externe Faktoren können die Ergebnisse stark beeinflussen."},getGlobalInsight:()=>{if(!g.value)return"Keine globalen Kontextdaten verfügbar";const e=g.value.match(/(?:global_|world_|[a-z_]+_)?([a-z_&]+)(?:_forecast)?$/i);if(e){const t=e[1].toLowerCase();return t.includes("wheat")?"Weizen ist eines der wichtigsten Grundnahrungsmittel weltweit und ernährt Milliarden von Menschen.":t.includes("maize")?"Mais ist sowohl für die menschliche Ernährung als auch als Tierfutter von entscheidender Bedeutung.":t.includes("rice")?"Reis ist das Hauptnahrungsmittel für mehr als die Hälfte der Weltbevölkerung.":t.includes("milk")?"Milchprodukte sind eine wichtige Proteinquelle und unterstützen die Ernährungssicherheit weltweit.":t.includes("soyabeans")||t.includes("soyabean")?"Sojabohnen sind eine wichtige Protein- und Ölquelle und werden weltweit als Viehfutter verwendet.":t.includes("sugar")?"Zucker und Süßstoffe sind wichtige Energielieferanten und haben großen Einfluss auf die globale Ernährung.":t.includes("vegetable")||t.includes("fruits")?"Obst und Gemüse sind essentiell für eine ausgewogene Ernährung und liefern wichtige Vitamine und Mineralstoffe.":t.includes("meat")||t.includes("bovine")||t.includes("pigmeat")||t.includes("poultry")?"Fleischprodukte sind wichtige Protein- und Nährstoffquellen, deren Produktion erhebliche Umweltauswirkungen hat.":t.includes("cassava")?"Maniok ist ein wichtiges Grundnahrungsmittel in tropischen Regionen und eine wichtige Kohlenhydratquelle.":t.includes("potatoes")?"Kartoffeln sind weltweit ein wichtiges Grundnahrungsmittel und eine bedeutende Quelle für Kohlenhydrate.":t.includes("fish")||t.includes("seafood")?"Fisch und Meeresfrüchte sind wichtige Protein- und Omega-3-Quellen für Milliarden von Menschen.":"Diese Produktkategorie spielt eine wichtige Rolle für die globale Ernährungssicherheit und nachhaltige Landwirtschaft."}return"Diese Produktkategorie spielt eine wichtige Rolle für die globale Ernährungssicherheit."},chartData:G,loadAvailableForecasts:B,ref:l,computed:o,watch:u,onMounted:c,get useDataStore(){return e},get useErrorHandling(){return A},get getMLGermanName(){return ct},get productMappings(){return it},get formatAgricultureValue(){return L},ErrorBoundary:z,ErrorDisplay:E,LoadingSpinner:O,BaseButton:F,SearchableSelect:C,MLChart:n};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}},[["render",function(e,t,a,r,s,n){return x(),g("div",Aa,[y(r.ErrorBoundary,{onError:r.handleError},{default:b(()=>[t[30]||(t[30]=h("div",{class:"panel-header"},[h("h2",{class:"panel-title"},"ML Prognosen"),h("p",{class:"panel-description"}," Machine Learning Vorhersagen für landwirtschaftliche Produktion ")],-1)),h("div",Ga,[h("div",La,[h("div",Ba,[t[3]||(t[3]=h("label",null,"Prognosentyp",-1)),y(r.SearchableSelect,{modelValue:r.selectedForecastType,"onUpdate:modelValue":[t[0]||(t[0]=e=>r.selectedForecastType=e),r.loadAvailableForecasts],options:r.forecastTypeOptions,placeholder:"Prognosentyp auswählen..."},null,8,["modelValue","options","onUpdate:modelValue"])]),h("div",Ra,[t[4]||(t[4]=h("label",null,"Prognose",-1)),y(r.SearchableSelect,{modelValue:r.selectedForecast,"onUpdate:modelValue":t[1]||(t[1]=e=>r.selectedForecast=e),options:r.forecastOptions,placeholder:"Prognose auswählen...",disabled:0===r.availableForecasts.length},null,8,["modelValue","options","disabled"])]),h("div",Va,[t[5]||(t[5]=h("label",null,"Modell",-1)),y(r.SearchableSelect,{modelValue:r.selectedModel,"onUpdate:modelValue":t[2]||(t[2]=e=>r.selectedModel=e),options:r.modelOptions,placeholder:"Modell auswählen..."},null,8,["modelValue","options"])]),h("div",Wa,[t[6]||(t[6]=h("label",{class:"invisible"},"Aktion",-1)),y(r.BaseButton,{disabled:r.isLoading||!r.selectedForecast,class:"w-full",onClick:r.loadPredictions},{default:b(()=>[r.isLoading?(x(),w(r.LoadingSpinner,{key:0,size:"sm"})):m("",!0),S(" "+p(r.isLoading?"Lädt...":"Prognosen laden"),1)]),_:1},8,["disabled","onClick"])])])]),h("div",ja,[r.hasError?(x(),g("div",Ta,[y(r.ErrorDisplay,{error:r.error,title:"Fehler beim Laden der ML-Prognosen","show-retry":!0,onRetry:r.loadPredictions},null,8,["error","onRetry"])])):r.isLoading?(x(),g("div",Ia,[y(r.LoadingSpinner,{size:"lg"}),t[7]||(t[7]=h("p",{class:"loading-text"},"Lade ML-Prognosen...",-1))])):r.predictions.length>0?(x(),g("div",Ua,[r.forecastData?(x(),g("div",Ka,[h("h3",qa,p(r.getFormattedForecastTitle()),1),h("div",Na,[h("div",Ha,[t[8]||(t[8]=h("span",{class:"info-label"},"Einheit:",-1)),h("span",Za,p(r.forecastData.unit||"1000 t"),1)]),t[10]||(t[10]=h("div",{class:"info-item"},[h("span",{class:"info-label"},"Prognosezeitraum:"),h("span",{class:"info-value"},"2023 - 2035")],-1)),h("div",$a,[t[9]||(t[9]=h("span",{class:"info-label"},"Modelltyp:",-1)),h("span",Ya,p(r.getModelLabel(r.selectedModel)),1)]),t[11]||(t[11]=h("div",{class:"info-item"},[h("span",{class:"info-label"},"Konfidenzintervall:"),h("span",{class:"info-value"},"95%")],-1))])])):m("",!0),h("div",Ja,[t[17]||(t[17]=h("h3",{class:"stats-title"},"Modell-Performance",-1)),r.modelStats.r2&&parseFloat(r.modelStats.r2)<0?(x(),g("div",Qa,t[12]||(t[12]=[h("p",{class:"warning-title"},"⚠️ Warnung: Schlechte Modellperformance",-1),h("p",{class:"warning-text"}," Das lineare Modell ist für diese Daten ungeeignet. Bitte wechseln Sie zum polynomialen oder Ensemble-Modell für bessere Vorhersagen. ",-1)]))):m("",!0),"ensemble"===r.selectedModel?(x(),g("div",Xa,t[13]||(t[13]=[h("p",{class:"text-sm text-blue-600 dark:text-blue-400 mb-3"}," ℹ️ Ensemble-Modell kombiniert Linear- und Polynomialregressionen für robustere Vorhersagen. ",-1)]))):m("",!0),h("div",er,[h("div",tr,[t[14]||(t[14]=h("div",{class:"stat-label"},"R² Score",-1)),h("div",{class:_(["stat-value",r.getR2Class(r.modelStats.r2)])},p(r.modelStats.r2),3),"ensemble"===r.selectedModel?(x(),g("div",ar," Durchschnitt der Einzelmodelle ")):m("",!0)]),h("div",rr,[t[15]||(t[15]=h("div",{class:"stat-label"},"RMSE",-1)),h("div",sr,p(r.modelStats.rmse),1),"ensemble"===r.selectedModel?(x(),g("div",nr," Gemittelte Wurzel der mittleren Quadratfehler ")):m("",!0)]),h("div",ir,[t[16]||(t[16]=h("div",{class:"stat-label"},"MAE",-1)),h("div",lr,p(r.modelStats.mae),1),"ensemble"===r.selectedModel?(x(),g("div",or," Gemittelter mittlerer absoluter Fehler ")):m("",!0)]),h("div",cr,[h("div",dr,p("ensemble"===r.selectedModel?"Übereinstimmung":"Genauigkeit"),1),h("div",ur,p(r.modelStats.accuracy)+"%",1),"ensemble"===r.selectedModel?(x(),g("div",gr," Modellübereinstimmung zwischen Linear- und Polynomialregression ")):m("",!0)])])]),h("div",hr,[y(r.MLChart,{data:r.chartData,config:r.chartConfig,onPredictionSelect:r.handlePredictionSelect,onConfidenceToggle:r.handleConfidenceToggle},null,8,["data","config"])]),r.forecastData?(x(),g("div",mr,[t[26]||(t[26]=h("h3",{class:"insights-title"},"Prognose-Einblicke",-1)),h("div",pr,[h("div",fr,[t[19]||(t[19]=h("div",{class:"insight-icon"},"📈",-1)),h("div",vr,[t[18]||(t[18]=h("h4",null,"Wachstumstrend",-1)),h("p",null,p(r.getGrowthInsight()),1)])]),h("div",yr,[t[21]||(t[21]=h("div",{class:"insight-icon"},"🎯",-1)),h("div",br,[t[20]||(t[20]=h("h4",null,"Prognosegenauigkeit",-1)),h("p",null,p(r.getAccuracyInsight()),1)])]),h("div",kr,[t[23]||(t[23]=h("div",{class:"insight-icon"},"⚠️",-1)),h("div",xr,[t[22]||(t[22]=h("h4",null,"Unsicherheitsfaktoren",-1)),h("p",null,p(r.getUncertaintyInsight()),1)])]),h("div",_r,[t[25]||(t[25]=h("div",{class:"insight-icon"},"🌍",-1)),h("div",Sr,[t[24]||(t[24]=h("h4",null,"Globale Bedeutung",-1)),h("p",null,p(r.getGlobalInsight()),1)])])])])):m("",!0),h("div",wr,[t[28]||(t[28]=h("h3",{class:"table-title"},"Detaillierte Prognosen",-1)),h("div",Mr,[h("table",Pr,[t[27]||(t[27]=h("thead",null,[h("tr",null,[h("th",null,"Jahr"),h("th",null,"Prognose"),h("th",null,"Konfidenzintervall"),h("th",null,"Trend"),h("th",null,"Zuverlässigkeit")])],-1)),h("tbody",null,[(x(!0),g(f,null,v(r.predictions,e=>(x(),g("tr",{key:e.year},[h("td",null,p(e.year),1),h("td",null,p(r.formatValue(e.predicted_value)),1),h("td",null,p(r.formatValue(e.confidence_lower))+" - "+p(r.formatValue(e.confidence_upper)),1),h("td",null,[h("span",{class:_(r.getTrendClass(e.trend))},p(r.formatTrend(e.trend)),3)]),h("td",null,[h("div",Cr,[h("div",{class:_(["reliability-fill",r.getReliabilityClass(e.reliability)]),style:M({width:`${e.reliability}%`})},null,6),h("span",Er,p(e.reliability)+"%",1)])])]))),128))])])])])])):(x(),g("div",zr,t[29]||(t[29]=[h("div",{class:"empty-icon"},"🤖",-1),h("h3",null,"Keine Prognosen geladen",-1),h("p",null,'Wählen Sie einen Prognosentyp und eine spezifische Prognose aus, dann klicken Sie auf "Prognosen laden".',-1)])))])]),_:1,__:[30]})])}],["__scopeId","data-v-4dfc7292"],["__file","MLPanel.vue"]]),Fr=Object.freeze(Object.defineProperty({__proto__:null,default:Dr},Symbol.toStringTag,{value:"Module"}));export{st as D,Dr as M,Fa as S,Gt as T,G as _,ut as a,R as b,B as c,nt as d,Lt as e,Oa as f,ot as g,Fr as h};
//# sourceMappingURL=panels-BiDjiUhN.js.map

<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>FAO Lebensmitteldaten-Analyse</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="js/slider-debug.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
</head>
<body>
    <!-- Worldmap Section -->
    <main class="app-container">
        <div class="map-view">
            <div id="world-map"></div>
            
            <!-- Navigation Controls -->
            <nav class="nav-controls">
                <button data-panel="country-list" aria-label="Länder-Liste">
                    <i class="material-icons">list</i>
                </button>
                <div class="nav-group">
                    <button class="nav-toggle" aria-label="Analysen" aria-expanded="false">
                        <i class="material-icons">apps</i>
                        <span>Analysen</span>
                        <i class="material-icons expand-icon">expand_more</i>
                    </button>
                    <div class="nav-menu" hidden>
                        <button data-panel="dashboard"><i class="material-icons">dashboard</i> Dashboard</button>
                        <button data-panel="timeseries"><i class="material-icons">timeline</i> Zeitreihen</button>
                        <button data-panel="simulation"><i class="material-icons">show_chart</i> Simulation</button>
                        <button data-panel="ml"><i class="material-icons">memory</i> ML Prognosen</button>
                        <button data-panel="structural"><i class="material-icons">analytics</i> Strukturanalyse</button>
                        <button data-panel="process"><i class="material-icons">device_hub</i> Process Mining</button>
                    </div>
                </div>
            </nav>

            <!-- Map Controls -->
            <div class="map-controls">
                <div class="control-group">
                    <label for="product-select">Produkt:</label>
                    <select id="product-select">
                        <option value="wheat_and_products">Weizen und Produkte</option>
                        <option value="rice_and_products">Reis und Produkte</option>
                        <option value="maize_and_products">Mais und Produkte</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="metric-select">Metrik:</label>
                    <select id="metric-select">
                        <option value="production">Produktion (t)</option>
                        <option value="food_supply_quantity_kg_capita_yr">Versorgungsmenge (kg/Kopf/Jahr)</option>
                        <option value="food_supply_kcal_capita_day">Versorgung (kcal/Kopf/Tag)</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="year-slider">Jahr: <span id="year-display">2010</span></label>
                    <input type="range" id="year-slider" min="2010" max="2022" value="2010" step="1" />
                </div>
            </div>

            <!-- Zoom Controls -->
            <div class="zoom-controls">
                <button class="zoom-btn zoom-in" aria-label="Vergrößern"><i class="material-icons">add</i></button>
                <button class="zoom-btn zoom-out" aria-label="Verkleinern"><i class="material-icons">remove</i></button>
                <button class="zoom-btn zoom-reset" aria-label="Zoom zurücksetzen"><i class="material-icons">refresh</i></button>
            </div>

            <!-- Tooltip and Legend -->
            <div class="tooltip" id="map-tooltip"></div>
            <div id="map-legend"></div>
        </div>
        <!-- Panels Container -->
        <div class="panels-container">
            <div id="panel-dashboard" class="panel">
                <div class="panel-header">
                    <h3>Dashboard</h3>
                    <button class="panel-close" aria-label="Schließen"><i class="material-icons">close</i></button>
                </div>
                <div class="panel-content">
                    <div class="dashboard-grid">
                        <div class="card overview-card">
                            <h4>Übersicht</h4>
                            <div id="overview-stats"></div>
                        </div>
                        <div class="card trends-card">
                            <h4>Globale Trends</h4>
                            <div id="global-trends"></div>
                        </div>
                        <div class="card events-card">
                            <h4>Politische Ereignisse</h4>
                            <div id="political-events"></div>
                        </div>
                        <div class="card climate-card">
                            <h4>Klimaauswirkungen</h4>
                            <div id="climate-impacts"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="panel-timeseries" class="panel">
                <div class="panel-header">
                    <h3>Zeitreihenanalyse</h3>
                    <button class="panel-close" aria-label="Schließen"><i class="material-icons">close</i></button>
                </div>
                <div class="panel-content">
                    <div class="controls">
                        <div class="control-group">
                            <label for="ts-product-select">Produkt:</label>
                            <select id="ts-product-select">
                                <option value="wheat_and_products">Weizen und Produkte</option>
                                <option value="rice_and_products">Reis und Produkte</option>
                                <option value="maize_and_products">Mais und Produkte</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="ts-countries-select">Länder:</label>
                            <select id="ts-countries-select" multiple>
                                <option value="China">China</option>
                                <option value="United States of America">USA</option>
                                <option value="India">Indien</option>
                                <option value="Russian Federation">Russland</option>
                                <option value="Germany">Deutschland</option>
                                <option value="France">Frankreich</option>
                            </select>
                        </div>
                    </div>
                    <div class="export-controls">
                        <select id="export-format-timeseries">
                            <option value="svg">SVG</option>
                            <option value="png">PNG</option>
                        </select>
                        <button id="export-btn-timeseries">Export</button>
                    </div>
                    <div id="timeseries-chart" class="chart-container"></div>
                </div>
            </div>

            <div id="panel-simulation" class="panel">
                <div class="panel-header">
                    <h3>Zukunftssimulation</h3>
                    <button class="panel-close" aria-label="Schließen"><i class="material-icons">close</i></button>
                </div>
                <div class="panel-content">
                    <div class="controls">
                        <div class="control-group">
                            <label for="sim-scenario">Szenario:</label>
                            <select id="sim-scenario">
                                <option value="baseline">Baseline</option>
                                <option value="climate_change">Klimawandel</option>
                                <option value="population_growth">Bevölkerungswachstum</option>
                                <option value="conflict">Konflikt-Szenario</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="sim-years">Prognosejahre: <span id="sim-years-display">5</span></label>
                            <input type="range" id="sim-years" min="1" max="10" value="5" step="1">
                        </div>
                    </div>
                    <div id="simulation-results" class="chart-container"></div>
                </div>
            </div>

            <div id="panel-ml" class="panel">
                <div class="panel-header">
                    <h3>Machine Learning Prognosen</h3>
                    <button class="panel-close" aria-label="Schließen"><i class="material-icons">close</i></button>
                </div>
                <div class="panel-content">
                    <div class="controls">
                        <div class="control-group">
                            <label for="ml-product-select">Produkt:</label>
                            <select id="ml-product-select">
                                <option value="wheat_and_products">Weizen und Produkte</option>
                                <option value="rice_and_products">Reis und Produkte</option>
                                <option value="maize_and_products">Mais und Produkte</option>
                            </select>
                        </div>
                    </div>
                    <div class="export-controls">
                        <select id="export-format-ml">
                            <option value="svg">SVG</option>
                            <option value="png">PNG</option>
                        </select>
                        <button id="export-btn-ml">Export</button>
                    </div>
                    <div id="ml-chart" class="chart-container"></div>
                    <div class="ml-info">
                        <h4>Modell-Information</h4>
                        <div id="ml-model-info"></div>
                    </div>
                </div>
            </div>

            <div id="panel-structural" class="panel">
                <div class="panel-header">
                    <h3>Strukturanalyse</h3>
                    <button class="panel-close" aria-label="Schließen"><i class="material-icons">close</i></button>
                </div>
                <div class="panel-content">
                    <div class="controls">
                        <div class="control-group">
                            <label for="struct-analysis-type">Analyse-Typ:</label>
                            <select id="struct-analysis-type">
                                <option value="correlation">Korrelationsanalyse</option>
                                <option value="network">Netzwerkanalyse</option>
                                <option value="clustering">Clustering</option>
                            </select>
                        </div>
                    </div>
                    <div class="export-controls">
                        <select id="export-format-struct">
                            <option value="svg">SVG</option>
                            <option value="png">PNG</option>
                        </select>
                        <button id="export-btn-struct">Export</button>
                    </div>
                    <div id="structural-analysis-chart" class="chart-container"></div>
                </div>
            </div>

            <div id="panel-process" class="panel">
                <div class="panel-header">
                    <h3>Process Mining</h3>
                    <button class="panel-close" aria-label="Schließen"><i class="material-icons">close</i></button>
                </div>
                <div class="panel-content">
                    <div class="controls">
                        <div class="control-group">
                            <label for="process-type">Prozess-Typ:</label>
                            <select id="process-type">
                                <option value="supply_chain">Lieferkette</option>
                                <option value="production_flow">Produktionsfluss</option>
                                <option value="trade_patterns">Handelsmuster</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="process-product-select">Produkt:</label>
                            <select id="process-product-select">
                                <option value="wheat_and_products">Weizen und Produkte</option>
                                <option value="rice_and_products">Reis und Produkte</option>
                                <option value="maize_and_products">Mais und Produkte</option>
                                <option value="milk_-_excluding_butter">Milch (ohne Butter)</option>
                                <option value="fruits_-_excluding_wine">Früchte (ohne Wein)</option>
                                <option value="vegetables">Gemüse</option>
                                <option value="sugar_and_sweeteners">Zucker & Süßstoffe</option>                        <option value="potatoes_and_products">Kartoffeln und Produkte</option>
                        <option value="cassava_and_products">Cassava und Produkte</option>
                        <option value="nuts_and_products">Nüsse und Produkte</option>
                            </select>
                        </div>
                    </div>
                    <div class="export-controls">
                        <select id="export-format-process">
                            <option value="svg">SVG</option>
                            <option value="png">PNG</option>
                        </select>
                        <button id="export-btn-process">Export</button>
                    </div>
                    <div id="process-mining-chart" class="chart-container"></div>
                </div>
            </div>

            <div id="panel-country-list" class="panel">
                <div class="panel-header">
                    <h3>Länder-Liste</h3>
                    <button class="panel-close" aria-label="Schließen"><i class="material-icons">close</i></button>
                </div>
                <div class="panel-content">
                    <input type="text" id="country-list-search" placeholder="Land suchen..." />
                    <ul id="country-list-container"></ul>
                </div>
            </div>

            <div id="panel-country-info" class="panel country-info-panel">
                <div class="panel-header">
                    <div class="country-avatar">?</div>
                    <h3 class="country-name">Land auswählen</h3>
                    <button class="panel-close" aria-label="Schließen"><i class="material-icons">close</i></button>
                </div>
                <div class="panel-content">
                    <p class="country-stats">Wählen Sie ein Land auf der Karte aus.</p>
                </div>
            </div>
        </div>
    </main>

    <script src="js/utils.js"></script>
    <script src="js/country-mapping.js"></script>
    <script src="js/main.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/worldmap.js"></script>
    <script src="js/timeseries.js"></script>
    <script src="js/simulation.js"></script>
    <script src="js/ml-predictions.js"></script>
    <script src="js/structural-analysis.js"></script>
    <script src="js/export.js"></script>
    <script src="js/process-mining.js"></script>
    <script src="js/components/panels.js"></script>
</body>
</html>

